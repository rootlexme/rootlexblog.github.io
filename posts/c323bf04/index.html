<!DOCTYPE html><html lang="zh-CN"><head><title>Rootlex Blog</title><noscript>开启Javascript是必要的</noscript><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><meta aria-description=""><meta aria-keyshortcuts=""><script>!function(e,t,n,i){var r=t.createElement("script"),s=t.getElementsByTagName("script")[0];r.type="text/javascript",r.crossorigin=!0,r.onload=function(){(new e.LingQue.Monitor).init({id:"JyUGxmuSY10RPVbO"})},s.parentNode.insertBefore(r,s),r.src="https://sdk.51.la/perf/js-sdk-perf.min.js"}(window,document)</script><link href="/css/var.css" rel="stylesheet"><link href="/fonts/remixicon.css" rel="stylesheet"><link href="/css/main.css" rel="stylesheet"><link href="/css/content.css" rel="stylesheet"><link href="/css/hightlight/theme.css" rel="stylesheet"><script>const GobalCofig={codelimit:"300"}</script><style>:root{--code-limit:300px}</style><link href="https://cdn1.tianli0.top/npm/artalk@2.4.4/dist/Artalk.css" rel="stylesheet"><script src="https://cdn1.tianli0.top/npm/artalk@2.4.4/dist/Artalk.js"></script><script>!function(t){"use strict";!function(s){var e=window,c=document,i=t,n="".concat("https:"===c.location.protocol?"https://":"http://","sdk.51.la/js-sdk-pro.min.js"),o=c.createElement("script"),r=c.getElementsByTagName("script")[0];o.type="text/javascript",o.setAttribute("charset","UTF-8"),o.async=!0,o.src=n,o.id="LA_COLLECT",i.d=o;var a=function(){e.LA.ids.push(i)};e.LA?e.LA.ids&&a():(e.LA=t,e.LA.ids=[],a()),r.parentNode.insertBefore(o,r)}()}({id:"JtNQNQx0xMsvdN80",ck:"JtNQNQx0xMsvdN80",hashMode:!0})</script><meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="/atom.xml" title="Rootlex Blog" type="application/atom+xml"></head><body><main class="layouts_warp"><div class="layouts_content"><div class="sidebar_main w-1-3" id="sidebar"><div class="site_name"><img src="/img/site.png" alt="网页标题"></div><ul class="menu" id="menu"><li class="menu_list"><a href="/" class="menu_item"><i class="ri-home-6-line"></i> <span class="menu_item_span">主页</span></a></li><li class="menu_list"><a href="/says/" class="menu_item"><i class="ri-message-3-line"></i> <span class="menu_item_span">闲言碎语</span></a></li><li class="menu_list"><a href="/bgm/" class="menu_item"><i class="ri-movie-2-line"></i> <span class="menu_item_span">追番</span></a></li><li class="menu_list"><a href="/friends/" class="menu_item"><i class="ri-links-line"></i> <span class="menu_item_span">朋友们</span></a></li><li class="menu_list"><a href="/fc/" class="menu_item"><i class="ri-heart-line"></i> <span class="menu_item_span">朋友圈</span></a></li></ul><hr><div class="tab_warp"><input type="radio" name="side-tab" class="tab-radio-tj" id="card-selector-tj" checked> <input type="radio" name="side-tab" class="tab-radio-toc" id="card-selector-toc"><div class="tab_selector"><label for="card-selector-tj" class="tab-handler-tj">统计</label> <label for="card-selector-toc" class="tab-handler-toc">目录</label></div><div class="tab_content"><div class="tab_content-tj"><div class="statistics_item"><span class="statistics_span">文章</span> <span class="statistics_num">8 篇</span></div><div class="statistics_item"><span class="statistics_span">分类</span> <span class="statistics_num">3</span></div><div class="statistics_item"><span class="statistics_span">字数</span> <span class="statistics_num">7.9k</span></div><div class="statistics_item"><span class="statistics_span">运行</span> <span class="statistics_num">358 天</span></div></div><div class="tab_content-toc"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%89%8D%E8%A8%80"><span class="toc-text">前言</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BC%95%E5%85%A5js%E4%BB%A3%E7%A0%81"><span class="toc-text">引入js代码</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%96%B0%E5%BB%BAwaterfall%E6%96%87%E4%BB%B6"><span class="toc-text">新建waterfall文件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BC%95%E5%85%A5css%E6%A0%B7%E5%BC%8F"><span class="toc-text">引入css样式</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BC%95%E5%85%A5%E6%89%80%E9%9C%80%E7%9A%84%E6%96%87%E4%BB%B6"><span class="toc-text">引入所需的文件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E8%AF%B4%E8%AF%B4pug%E6%96%87%E4%BB%B6"><span class="toc-text">创建说说pug文件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A2%9E%E5%8A%A0%E8%AF%B4%E8%AF%B4type"><span class="toc-text">增加说说type</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%96%B0%E5%BB%BA%E8%AF%B4%E8%AF%B4%E9%A1%B5%E9%9D%A2"><span class="toc-text">新建说说页面</span></a></li></ol></div></div></div><div class="connect"><a target="_blank" rel="noopener" href="https://space.bilibili.com/494271806" style="color:#00b1ff" aria-label="bilibili"><i class="ri-bilibili-fill"></i></a><a target="_blank" rel="noopener" href="https://github.com/rootlexblog" style="color:#000" aria-label="github"><i class="ri-github-fill"></i></a><a target="_blank" rel="noopener" href="https://music.163.com/#/user/home?id=3416536539" style="color:#ff3030" aria-label="网易云"><i class="ri-netease-cloud-music-fill"></i></a><a href="mailto:a@nalex.top" style="color:#ffc952" aria-label="邮箱"><i class="ri-mail-send-line"></i></a></div><div class="copyright"><i class="ri-copyright-line"></i> <span>2023</span> <a href="/">Rootlex</a></div></div><div class="layouts_page_content w-2-3"><div class="nav hide" id="nav"><div class="nav_item"><a href="/" aria-label="主页" class="home"><i class="ri-home-6-line"></i></a><a class="rand_page" aria-label="随机页面"><i class="ri-shuffle-line"></i></a><div class="mobile_nav_item"><a class="menu_item" href="/" aria-label="主页"><i class="ri-home-6-line"></i></a><a class="menu_item" href="/says/" aria-label="闲言碎语"><i class="ri-message-3-line"></i></a><a class="menu_item" href="/bgm/" aria-label="追番"><i class="ri-movie-2-line"></i></a><a class="menu_item" href="/friends/" aria-label="朋友们"><i class="ri-links-line"></i></a><a class="menu_item" href="/fc/" aria-label="朋友圈"><i class="ri-heart-line"></i></a></div></div><div class="nav_item"><a href="/atom.xml" aria-label="rss" target="_blank"><i class="ri-rss-fill"></i></a><a target="_blank" rel="noopener" href="https://www.travellings.cn/go.html" aria-label="开往"><i class="ri-subway-fill"></i></a></div></div><div class="content_top"><div class="top_img"><img src="/img/topimg.webp" alt="顶部头图" class="top_img_a"><div class="me"><span>Rootlex</span> <img src="/img/avatar.webp" alt="头像" class="avatar"></div></div><div class="top_bar"><div class="cate_list" id="cate"><a class="cate_item" href="/">主页</a><div class="cate_list_item"><a class="cate_item" href="/categories/教程/">教程</a> <a class="cate_item" href="/categories/笔记/">笔记</a> <a class="cate_item" href="/categories/折腾/">折腾</a></div></div><div class="bar_dec"><span>寒蝉黎明之时，便是重生之日</span></div></div></div><div class="index_content"><div class="index_content_list_item"><div class="content_author"><img src="/img/avatar.webp" alt="头像"><div class="content_author_item"><span class="name">Rootlex</span><div class="date">2022-11-19</div></div></div><div class="post_info">Waline实现动态说说</div><div class="content_g"><html><head></head><body><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>看到许多大佬都拥有自己的说说，于是便想弄一个自己的说说，但是<a target="_blank" rel="noopener" href="https://blog.zhheo.com/">@heo</a>的静态说说缺点很明显，而<a target="_blank" rel="noopener" href="https://bb.js.org/">bbtalk</a>，<a target="_blank" rel="noopener" href="https://artitalk.js.org/doc.html">artialk</a>和<a target="_blank" rel="noopener" href="https://www.antmoe.com/bb/">小康bb</a>都需要额外部署，于是我就想到了用评论系统，这样子既方便又不用二次部署</p><p><img src="https://bu.dusays.com/2022/11/19/6378e1ab4be3a.png" alt="说说demo"></p><p><strong>优点</strong></p><ol><li>没有本地局限性</li><li>支持heo同款瀑布流</li><li>无需额外部署</li></ol><h2 id="引入js代码"><a href="#引入js代码" class="headerlink" title="引入js代码"></a>引入js代码</h2><p>在 <code>custom.js</code> 加入以下代码</p><pre class="language-javascript pre_code" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> percentFlag <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span> <span class="token comment">// 节流阀</span>
<span class="token keyword">var</span> rootlex_musicPlaying <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> talksurl <span class="token operator">=</span>  <span class="token string">'https://xxx.xxx.xxx'</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> talkspath <span class="token operator">=</span> <span class="token string">'/talks/'</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">essayScroll</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> a <span class="token operator">=</span> document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>scrollTop <span class="token operator">||</span> window<span class="token punctuation">.</span>pageYOffset<span class="token punctuation">;</span> <span class="token comment">// 卷去高度</span>
    <span class="token keyword">const</span> waterfallResult <span class="token operator">=</span> a <span class="token operator">%</span> document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>clientHeight<span class="token punctuation">;</span> <span class="token comment">// 卷去一个视口</span>
    result <span class="token operator">&lt;=</span> <span class="token number">99</span> <span class="token operator">||</span> <span class="token punctuation">(</span>result <span class="token operator">=</span> <span class="token number">99</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>
        <span class="token operator">!</span>percentFlag <span class="token operator">&amp;&amp;</span>
        waterfallResult <span class="token operator">+</span> <span class="token number">100</span> <span class="token operator">&gt;=</span> document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>clientHeight <span class="token operator">&amp;&amp;</span>
        document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">"#waterfall"</span><span class="token punctuation">)</span>
    <span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// console.info(waterfallResult, document.documentElement.clientHeight);</span>
        <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token function">waterfall</span><span class="token punctuation">(</span><span class="token string">"#waterfall"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">"#waterfall"</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token function">waterfall</span><span class="token punctuation">(</span><span class="token string">"#waterfall"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">const</span> r <span class="token operator">=</span> window<span class="token punctuation">.</span>scrollY <span class="token operator">+</span> document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>clientHeight<span class="token punctuation">;</span>

    <span class="token keyword">let</span> p <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"post-comment"</span><span class="token punctuation">)</span> <span class="token operator">||</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"footer"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token punctuation">(</span>p<span class="token punctuation">.</span>offsetTop <span class="token operator">+</span> p<span class="token punctuation">.</span>offsetHeight <span class="token operator">/</span> <span class="token number">2</span> <span class="token operator">&lt;</span> r <span class="token operator">||</span> <span class="token number">90</span> <span class="token operator">&lt;</span> result<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>percentFlag <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">replaceAll</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span> n<span class="token punctuation">,</span> t</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> e<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> rootlex <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token function">getTalks</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">fetch</span><span class="token punctuation">(</span>talksurl <span class="token operator">+</span> <span class="token string">'/comment?path='</span> <span class="token operator">+</span> talkspath<span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span> res<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">json</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                <span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> talksdata <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span>
                <span class="token keyword">while</span> <span class="token punctuation">(</span>i <span class="token operator">&lt;</span> json<span class="token punctuation">.</span>count<span class="token punctuation">)</span><span class="token punctuation">{</span>
                    <span class="token keyword">if</span> <span class="token punctuation">(</span>json<span class="token punctuation">.</span>data<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>type <span class="token operator">==</span> <span class="token string">'administrator'</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                        talksdata <span class="token operator">+=</span> <span class="token string">'&lt;li class="bber-item"&gt;&lt;div class="bber-content"&gt;'</span> <span class="token operator">+</span> json<span class="token punctuation">.</span>data<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>comment <span class="token operator">+</span> <span class="token string">'&lt;/div&gt;&lt;hr&gt;&lt;div class="bber-bottom"&gt;&lt;div class="bber-info"&gt;&lt;div class="bber-info-time"&gt;&lt;i class="far fa-clock"&gt;&lt;/i&gt;&lt;time class="datatime" style="display: inline;"&gt;'</span> <span class="token operator">+</span> <span class="token function">dayjs</span><span class="token punctuation">(</span>json<span class="token punctuation">.</span>data<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>createdAt<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">'YYYY/MM/DD'</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">'&lt;/time&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;'</span>
                    <span class="token punctuation">}</span>
                    i<span class="token operator">++</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
                document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'waterfall'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>innerHTML<span class="token operator">=</span>talksdata<span class="token punctuation">;</span>
                rootlex<span class="token punctuation">.</span><span class="token function">reflashEssayWaterFall</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">err</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">reflashEssayWaterFall</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">"#waterfall"</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span>
        <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">waterfall</span><span class="token punctuation">(</span><span class="token string">"#waterfall"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"waterfall"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"show"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
rootlex<span class="token punctuation">.</span><span class="token function">reflashEssayWaterFall</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><div class="code-expand-btn"><i class="ri-arrow-drop-down-line"></i></div></pre><p><strong>参数解析</strong></p><table><thead><tr><th>变量</th><th>功能</th></tr></thead><tbody><tr><td>talksurl</td><td>你的waline链接</td></tr><tr><td>talkspath</td><td>说说页面链接 e.g. /talks/</td></tr></tbody></table><h2 id="新建waterfall文件"><a href="#新建waterfall文件" class="headerlink" title="新建waterfall文件"></a>新建waterfall文件</h2><p>新建一个名为 <code>waterfall.js</code> 的文件，加入一下代码</p><pre class="language-javascript pre_code" data-language="javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">waterfall</span><span class="token punctuation">(</span><span class="token parameter">a</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">function</span> <span class="token function">b</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span>b</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">var</span> c<span class="token operator">=</span>window<span class="token punctuation">.</span><span class="token function">getComputedStyle</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">return</span> <span class="token function">parseFloat</span><span class="token punctuation">(</span>c<span class="token punctuation">[</span><span class="token string">"margin"</span><span class="token operator">+</span>a<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">||</span><span class="token number">0</span><span class="token punctuation">}</span><span class="token keyword">function</span> <span class="token function">c</span><span class="token punctuation">(</span><span class="token parameter">a</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">return</span> a<span class="token operator">+</span><span class="token string">"px"</span><span class="token punctuation">}</span><span class="token keyword">function</span> <span class="token function">d</span><span class="token punctuation">(</span><span class="token parameter">a</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">return</span> <span class="token function">parseFloat</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span>style<span class="token punctuation">.</span>top<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token keyword">function</span> <span class="token function">e</span><span class="token punctuation">(</span><span class="token parameter">a</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">return</span> <span class="token function">parseFloat</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span>style<span class="token punctuation">.</span>left<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token keyword">function</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token parameter">a</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">return</span> a<span class="token punctuation">.</span>clientWidth<span class="token punctuation">}</span><span class="token keyword">function</span> <span class="token function">g</span><span class="token punctuation">(</span><span class="token parameter">a</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">return</span> a<span class="token punctuation">.</span>clientHeight<span class="token punctuation">}</span><span class="token keyword">function</span> <span class="token function">h</span><span class="token punctuation">(</span><span class="token parameter">a</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">return</span> <span class="token function">d</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token operator">+</span><span class="token function">g</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token operator">+</span><span class="token function">b</span><span class="token punctuation">(</span><span class="token string">"Bottom"</span><span class="token punctuation">,</span>a<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token keyword">function</span> <span class="token function">i</span><span class="token punctuation">(</span><span class="token parameter">a</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">return</span> <span class="token function">e</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token operator">+</span><span class="token function">f</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token operator">+</span><span class="token function">b</span><span class="token punctuation">(</span><span class="token string">"Right"</span><span class="token punctuation">,</span>a<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token keyword">function</span> <span class="token function">j</span><span class="token punctuation">(</span><span class="token parameter">a</span><span class="token punctuation">)</span><span class="token punctuation">{</span>a<span class="token operator">=</span>a<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span>b</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">return</span> <span class="token function">h</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token operator">===</span><span class="token function">h</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token operator">?</span><span class="token function">e</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token operator">-</span><span class="token function">e</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token operator">:</span><span class="token function">h</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token operator">-</span><span class="token function">h</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token keyword">function</span> <span class="token function">k</span><span class="token punctuation">(</span><span class="token parameter">b</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token function">f</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token operator">!=</span>t<span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span>b<span class="token punctuation">.</span>target<span class="token punctuation">.</span><span class="token function">removeEventListener</span><span class="token punctuation">(</span>b<span class="token punctuation">.</span>type<span class="token punctuation">,</span>arguments<span class="token punctuation">.</span>callee<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">waterfall</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token string">"string"</span><span class="token operator">==</span><span class="token keyword">typeof</span> a<span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span>a<span class="token operator">=</span>document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">var</span> l<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span>children<span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">a</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">return</span> a<span class="token punctuation">.</span>style<span class="token punctuation">.</span>position<span class="token operator">=</span><span class="token string">"absolute"</span><span class="token punctuation">,</span>a<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>a<span class="token punctuation">.</span>style<span class="token punctuation">.</span>position<span class="token operator">=</span><span class="token string">"relative"</span><span class="token punctuation">;</span><span class="token keyword">var</span> m<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>l<span class="token punctuation">.</span>length<span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span>l<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>style<span class="token punctuation">.</span>top<span class="token operator">=</span><span class="token string">"0px"</span><span class="token punctuation">,</span>l<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>style<span class="token punctuation">.</span>left<span class="token operator">=</span><span class="token function">c</span><span class="token punctuation">(</span><span class="token function">b</span><span class="token punctuation">(</span><span class="token string">"Left"</span><span class="token punctuation">,</span>l<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>m<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>l<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> n<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>n<span class="token operator">&lt;</span>l<span class="token punctuation">.</span>length<span class="token punctuation">;</span>n<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">var</span> o<span class="token operator">=</span>l<span class="token punctuation">[</span>n<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span>p<span class="token operator">=</span>l<span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">,</span>q<span class="token operator">=</span><span class="token function">i</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span><span class="token operator">+</span><span class="token function">f</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token operator">&lt;=</span><span class="token function">f</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>q<span class="token punctuation">)</span><span class="token keyword">break</span><span class="token punctuation">;</span>p<span class="token punctuation">.</span>style<span class="token punctuation">.</span>top<span class="token operator">=</span>o<span class="token punctuation">.</span>style<span class="token punctuation">.</span>top<span class="token punctuation">,</span>p<span class="token punctuation">.</span>style<span class="token punctuation">.</span>left<span class="token operator">=</span><span class="token function">c</span><span class="token punctuation">(</span><span class="token function">i</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span><span class="token operator">+</span><span class="token function">b</span><span class="token punctuation">(</span><span class="token string">"Left"</span><span class="token punctuation">,</span>p<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>m<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token punctuation">;</span>n<span class="token operator">&lt;</span>l<span class="token punctuation">.</span>length<span class="token punctuation">;</span>n<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token function">j</span><span class="token punctuation">(</span>m<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">var</span> p<span class="token operator">=</span>l<span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">,</span>r<span class="token operator">=</span>m<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>p<span class="token punctuation">.</span>style<span class="token punctuation">.</span>top<span class="token operator">=</span><span class="token function">c</span><span class="token punctuation">(</span><span class="token function">h</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span><span class="token operator">+</span><span class="token function">b</span><span class="token punctuation">(</span><span class="token string">"Top"</span><span class="token punctuation">,</span>p<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>p<span class="token punctuation">.</span>style<span class="token punctuation">.</span>left<span class="token operator">=</span><span class="token function">c</span><span class="token punctuation">(</span><span class="token function">e</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>m<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token function">j</span><span class="token punctuation">(</span>m<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">var</span> s<span class="token operator">=</span>m<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>a<span class="token punctuation">.</span>style<span class="token punctuation">.</span>height<span class="token operator">=</span><span class="token function">c</span><span class="token punctuation">(</span><span class="token function">h</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token operator">+</span><span class="token function">b</span><span class="token punctuation">(</span><span class="token string">"Bottom"</span><span class="token punctuation">,</span>s<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">var</span> t<span class="token operator">=</span><span class="token function">f</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>window<span class="token punctuation">.</span>addEventListener<span class="token operator">?</span>window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"resize"</span><span class="token punctuation">,</span>k<span class="token punctuation">)</span><span class="token operator">:</span>document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>onresize<span class="token operator">=</span>k<span class="token punctuation">}</span></code><div class="code-expand-btn"><i class="ri-arrow-drop-down-line"></i></div></pre><h2 id="引入css样式"><a href="#引入css样式" class="headerlink" title="引入css样式"></a>引入css样式</h2><p>在 <code>custom.css</code> 引入代码</p><pre class="language-css pre_code" data-language="css"><code class="language-css"><span class="token selector">#page:has(#essay_page)</span> <span class="token punctuation">{</span>
    <span class="token property">border</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
    <span class="token property">box-shadow</span><span class="token punctuation">:</span> none <span class="token important">!important</span><span class="token punctuation">;</span>
    <span class="token property">padding</span><span class="token punctuation">:</span> 0 <span class="token important">!important</span><span class="token punctuation">;</span>
    <span class="token property">background</span><span class="token punctuation">:</span> transparent <span class="token important">!important</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.layout.hide-aside</span> <span class="token punctuation">{</span>
    <span class="token property">max-width</span><span class="token punctuation">:</span> 1400px <span class="token important">!important</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">#page:has(#essay_page) .page-title</span> <span class="token punctuation">{</span>
    <span class="token property">display</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">#web_bg ~ .page:has(#essay_page)</span> <span class="token punctuation">{</span>
    <span class="token property">background</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--rootlex-background<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">#bber .bber-content .datacont</span> <span class="token punctuation">{</span>
    <span class="token property">order</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
    <span class="token property">font-size</span><span class="token punctuation">:</span> 0.8rem<span class="token punctuation">;</span>
    <span class="token property">font-weight</span><span class="token punctuation">:</span> 700<span class="token punctuation">;</span>
    <span class="token property">color</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--rootlex-fontcolor<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
    <span class="token property">line-height</span><span class="token punctuation">:</span> 1.38<span class="token punctuation">;</span>
    <span class="token property">border-radius</span><span class="token punctuation">:</span> 12px<span class="token punctuation">;</span>
    <span class="token property">margin-bottom</span><span class="token punctuation">:</span> 0.5rem<span class="token punctuation">;</span>
    <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
    <span class="token property">flex-direction</span><span class="token punctuation">:</span> column<span class="token punctuation">;</span>
    <span class="token property">text-align</span><span class="token punctuation">:</span> justify<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">#bber p</span> <span class="token punctuation">{</span>
    <span class="token property">margin</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">#bber div.bber-content</span> <span class="token punctuation">{</span>
    <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
    <span class="token property">flex-flow</span><span class="token punctuation">:</span> wrap<span class="token punctuation">;</span>
    <span class="token property">border-radius</span><span class="token punctuation">:</span> 12px<span class="token punctuation">;</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">#bber .timeline ul li.bber-item</span> <span class="token punctuation">{</span>
    <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 32%<span class="token punctuation">;</span>
    <span class="token property">border</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--style-border-always<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token property">border-radius</span><span class="token punctuation">:</span> 12px<span class="token punctuation">;</span>
    <span class="token property">padding</span><span class="token punctuation">:</span> 1rem 1rem 0.5rem<span class="token punctuation">;</span>
    <span class="token property">transition</span><span class="token punctuation">:</span> all 0.3s ease 0s<span class="token punctuation">;</span>
    <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
    <span class="token property">flex-flow</span><span class="token punctuation">:</span> column nowrap<span class="token punctuation">;</span>
    <span class="token property">justify-content</span><span class="token punctuation">:</span> space-between<span class="token punctuation">;</span>
    <span class="token property">align-items</span><span class="token punctuation">:</span> flex-start<span class="token punctuation">;</span>
    <span class="token property">background</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--rootlex-card-bg<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token property">box-shadow</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--rootlex-shadow-border<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token property">margin-right</span><span class="token punctuation">:</span> 2%<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">#bber .timeline #waterfall.show</span> <span class="token punctuation">{</span>
    <span class="token property">opacity</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">#bber .timeline #waterfall</span> <span class="token punctuation">{</span>
    <span class="token property">opacity</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
    <span class="token property">transition</span><span class="token punctuation">:</span> all 0.3s ease 0s<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">#bber ul.list</span> <span class="token punctuation">{</span>
    <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
    <span class="token property">flex-flow</span><span class="token punctuation">:</span> row wrap<span class="token punctuation">;</span>
    <span class="token property">justify-content</span><span class="token punctuation">:</span> space-between<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">#bber</span> <span class="token punctuation">{</span>
    <span class="token property">margin-top</span><span class="token punctuation">:</span> 1rem<span class="token punctuation">;</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">#bber &gt; section &gt; ul &gt; li.bber-item</span> <span class="token punctuation">{</span>
    <span class="token property">margin-bottom</span><span class="token punctuation">:</span> 1rem<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">#bber-tips</span> <span class="token punctuation">{</span>
    <span class="token property">font-size</span><span class="token punctuation">:</span> 14px<span class="token punctuation">;</span>
    <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
    <span class="token property">justify-content</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
    <span class="token property">margin-top</span><span class="token punctuation">:</span> 1rem<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">#bber .timeline ul li.bber-item hr</span> <span class="token punctuation">{</span>
    <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
    <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>
    <span class="token property">margin</span><span class="token punctuation">:</span> 8px 0<span class="token punctuation">;</span>
    <span class="token property">border</span><span class="token punctuation">:</span> 1px dashed <span class="token function">var</span><span class="token punctuation">(</span>--rootlex-theme-op<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">#bber .bber-info</span> <span class="token punctuation">{</span>
    <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
    <span class="token property">align-items</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">#bber &gt; section &gt; ul &gt; li &gt; div .bber-info-time,
#bber &gt; section &gt; ul &gt; li &gt; div .bber-info-from</span> <span class="token punctuation">{</span>
    <span class="token property">color</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--rootlex-fontcolor<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token property">font-size</span><span class="token punctuation">:</span> 0.7rem<span class="token punctuation">;</span>
    <span class="token property">background-color</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--rootlex-background<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token property">padding</span><span class="token punctuation">:</span> 0 8px<span class="token punctuation">;</span>
    <span class="token property">border-radius</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span>
    <span class="token property">cursor</span><span class="token punctuation">:</span> default<span class="token punctuation">;</span>
    <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
    <span class="token property">align-items</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">#bber .bber-info .far.fa-clock</span> <span class="token punctuation">{</span>
    <span class="token property">margin-right</span><span class="token punctuation">:</span> 4px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">#bber &gt; section &gt; ul &gt; li &gt; div .bber-info-from span,
#bber &gt; section &gt; ul &gt; li &gt; div .bber-info-from</span> <span class="token punctuation">{</span>
    <span class="token property">margin-left</span><span class="token punctuation">:</span> 4px<span class="token punctuation">;</span>
    <span class="token property">font-weight</span><span class="token punctuation">:</span> 600<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">#bber .bber-bottom</span> <span class="token punctuation">{</span>
    <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
    <span class="token property">justify-content</span><span class="token punctuation">:</span> space-between<span class="token punctuation">;</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
    <span class="token property">margin-top</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">#bber .timeline ul li.bber-item:hover</span> <span class="token punctuation">{</span>
    <span class="token property">border</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--style-border-hover<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">/* 顶部样式 */</span>
<span class="token selector">.author-content.author-content-item.essayPage</span> <span class="token punctuation">{</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 19rem<span class="token punctuation">;</span>
    <span class="token property">background</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>https://bu.dusays.com/2022/09/01/631068b943a16.jpg<span class="token punctuation">)</span></span> left 28% / cover no-repeat<span class="token punctuation">;</span>
    <span class="token property">color</span><span class="token punctuation">:</span> #fff<span class="token punctuation">;</span>
    <span class="token property">overflow</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>
    <span class="token property">margin-top</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
    <span class="token property">border-radius</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>
<span class="token punctuation">}</span></code><div class="code-expand-btn"><i class="ri-arrow-drop-down-line"></i></div></pre><h2 id="引入所需的文件"><a href="#引入所需的文件" class="headerlink" title="引入所需的文件"></a>引入所需的文件</h2><p>在 <code>_config.butterfly.yml</code> 中的 <code>inject</code> 加入以下代码</p><pre class="language-yaml pre_code" data-language="yaml"><code class="language-yaml"><span class="token key atrule">head</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> &lt;link rel="stylesheet" href="/css/custom.css" type="text/css"<span class="token punctuation">&gt;</span>
<span class="token key atrule">bottom</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> &lt;script async data<span class="token punctuation">-</span>pjax src="/js/custom.js"<span class="token punctuation">&gt;</span>&lt;/script<span class="token punctuation">&gt;</span> <span class="token comment"># 自定义js</span>
  <span class="token punctuation">-</span> &lt;script async data<span class="token punctuation">-</span>pjax src="/js/waterfall.js"<span class="token punctuation">&gt;</span>&lt;/script<span class="token punctuation">&gt;</span>  <span class="token comment"># waterfall库</span>
  <span class="token punctuation">-</span> &lt;script async data<span class="token punctuation">-</span>pjax src="https<span class="token punctuation">:</span>//cdn1.tianli0.top/npm/dayjs"<span class="token punctuation">&gt;</span>&lt;/script<span class="token punctuation">&gt;</span> <span class="token comment"># 日期转换库</span></code><div class="code-expand-btn"><i class="ri-arrow-drop-down-line"></i></div></pre><h2 id="创建说说pug文件"><a href="#创建说说pug文件" class="headerlink" title="创建说说pug文件"></a>创建说说pug文件</h2><p>在 <code>themes/butterfly/layout/includes/page</code> 新建一个 <code>talks.pug</code> 的文件，加入一下代码</p><pre class="language-pug pre_code" data-language="pug"><code class="language-pug"><span class="token tag"><span class="token attr-id">#essay_page</span></span>
    <span class="token tag"><span class="token attr-class">.author-content</span><span class="token attr-class">.author-content-item</span><span class="token attr-class">.essayPage</span><span class="token attr-class">.single</span></span>
        <span class="token tag"><span class="token attr-class">.card-content</span></span>
            <span class="token tag"><span class="token attr-class">.author-content-item-tips</span></span> <span class="token plain-text">即刻短文</span>
    <span class="token tag"><span class="token attr-id">#bber</span></span>
        <span class="token tag">section<span class="token attr-class">.timeline</span><span class="token attr-class">.page-1</span></span>
            <span class="token tag">ul<span class="token attr-id">#waterfall</span><span class="token attr-class">.list</span></span>
                <span class="token tag">li<span class="token attr-class">.bber-item</span></span>
                    <span class="token tag"><span class="token attr-class">.bber-content</span></span>
                        <span class="token tag">p<span class="token attr-class">.datacont</span></span><span class="token punctuation">=</span><span class="token code"> <span class="token string">'加载中'</span></span>
    <span class="token tag"><span class="token attr-id">#bber-tips</span><span class="token attributes"><span class="token punctuation">(</span><span class="token attr-name">style</span><span class="token punctuation">=</span><span class="token attr-value">'color<span class="token operator">:</span> <span class="token keyword">var</span><span class="token punctuation">(</span><span class="token operator">--</span>rootlex<span class="token operator">-</span>secondtext</span><span class="token punctuation">)</span></span></span>;')
        <span class="token punctuation">|</span> <span class="token punctuation">-</span> 只展示最近30条短文 <span class="token punctuation">-</span>

<span class="token tag">script</span><span class="token punctuation">.</span><span class="token multiline-script">
    rootlex<span class="token punctuation">.</span><span class="token function">getTalks</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span></code><div class="code-expand-btn"><i class="ri-arrow-drop-down-line"></i></div></pre><h2 id="增加说说type"><a href="#增加说说type" class="headerlink" title="增加说说type"></a>增加说说type</h2><p>在 <code>themes/butterfly/layout/page.pug</code> 注册说说页面</p><pre class="language-diff pre_code" data-language="diff"><code class="language-diff"><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   if top_img === false
</span><span class="token prefix unchanged"> </span><span class="token line">     h1.page-title= page.title
</span></span>
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   case page.type
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">      when 'talks'
</span><span class="token prefix inserted">+</span><span class="token line">        include includes/page/talks.pug
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">     when 'tags'
</span><span class="token prefix unchanged"> </span><span class="token line">       include includes/page/tags.pug
</span><span class="token prefix unchanged"> </span><span class="token line">     when 'link'
</span><span class="token prefix unchanged"> </span><span class="token line">       include includes/page/flink.pug
</span><span class="token prefix unchanged"> </span><span class="token line">     when 'categories'
</span><span class="token prefix unchanged"> </span><span class="token line">       include includes/page/categories.pug
</span><span class="token prefix unchanged"> </span><span class="token line">     default
</span><span class="token prefix unchanged"> </span><span class="token line">       include includes/page/default-page.pug</span></span></code><div class="code-expand-btn"><i class="ri-arrow-drop-down-line"></i></div></pre><h2 id="新建说说页面"><a href="#新建说说页面" class="headerlink" title="新建说说页面"></a>新建说说页面</h2><p>在终端中输入 <code>hexo new page talks</code> 创建说说页面</p><p><strong>说说页面头部</strong></p><pre class="language-markdown pre_code" data-language="markdown"><code class="language-markdown"><span class="token front-matter-block"><span class="token punctuation">---</span>
<span class="token front-matter yaml language-yaml"><span class="token key atrule">title</span><span class="token punctuation">:</span> 说说
<span class="token key atrule">date</span><span class="token punctuation">:</span> <span class="token datetime number">2022-10-11 09:37:02</span>
<span class="token key atrule">comments</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
<span class="token key atrule">aside</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
<span class="token key atrule">top_img</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
<span class="token key atrule">type</span><span class="token punctuation">:</span> talks</span>
<span class="token punctuation">---</span></span></code><div class="code-expand-btn"><i class="ri-arrow-drop-down-line"></i></div></pre></body></html></div><div class="comments_top"><i class="ri-chat-3-line"></i><div class="comment_title">评论</div></div><div id="Comments"></div><script>function Comments(){new Artalk({el:"#Comments",pageKey:"https://blog.nalex.top/posts/c323bf04/",pageTitle:"Waline实现动态说说",server:"https://artalk.yj.al/",site:"Rootlex 的博客"})}Comments(),document.addEventListener("pjax:complete",(()=>{Comments()}))</script></div></div></div></div></main><script src="/js/main.js"></script><script src="/js/lib/pjax.min.js"></script><script>const pjax=new Pjax({elements:'a:not([target="_blank"])',selectors:[".index_content",".tab_warp",".js-pjax"],cacheBust:!1,scrollRestoration:!1,analytics:!1});document.addEventListener("pjax:complete",(()=>{whenDOMReady()}))</script><div class="js-pjax"><script>toc.init()</script></div></body></html>