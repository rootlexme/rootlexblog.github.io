function throttle(t,e=100){let o=null;return function(){o||(o=setTimeout((()=>{t.call(this),o=null}),e))}}function navShow(){const t=document.getElementById("nav");document.onscroll=throttle((function(){document.documentElement.scrollTop>=60?(t.classList.add("show"),t.classList.remove("hide")):(t.classList.remove("show"),t.classList.add("hide"))}))}function setActive(t){const e=document.getElementById(t);for(const t of e.getElementsByTagName("a"))t.href===document.URL?t.classList.add("active"):t.classList.remove("active")}class extendCode{static init(){document.querySelectorAll(".code-expand-btn").forEach((t=>{const e=t.parentNode;e.clientHeight<=GLOBALCONFIG.codelimit?t.classList.add("display"):(this.addShowEvent(t,e.clientHeight),e.setAttribute("style",`max-height: ${GLOBALCONFIG.codelimit}px;`))}))}static addShowEvent(t,e){t.addEventListener("click",(o=>{const n=t.parentNode;n.classList.contains("done")?(n.classList.remove("done"),t.childNodes[0].classList="ri-arrow-drop-down-line",n.setAttribute("style",`max-height: ${GLOBALCONFIG.codelimit}px;`)):(n.classList.add("done"),t.childNodes[0].classList="ri-arrow-drop-up-line",n.setAttribute("style",`max-height: ${e}px;padding-bottom: 2.1em;`))}))}}class toc{static init(){document.querySelectorAll(".toc a").forEach((t=>{t.addEventListener("click",(t=>{t.preventDefault(),this.getAnchor(decodeURI(t.target.parentNode.hash))}))}))}static scrollToAnchor(t,e){console.log(t,e),scrollTo({top:e,left:t,behavior:"smooth"})}static getAnchor(t){const e=document.querySelector(t);this.scrollToAnchor(e.getBoundingClientRect().left,e.getBoundingClientRect().top+(window.scrollY?window.scrollY:0)-72)}}function lazyloadImg(){window.lazyLoadInstance=new LazyLoad({elements_selector:"img",threshold:0,data_src:"lazy-src",callback_error:t=>{t.setAttribute("src",GLOBALCONFIG.lazyload.error)}})}function changeTimeFormate(){const t=document.getElementsByTagName("time");for(var e=0;e<t.length;e++){const o=t[e].getAttribute("datetime"),n=new Date(o),i=(new Date).getTime()-n.getTime(),a=Math.floor(i/864e5);0===a?timeString="最近":1===a?timeString="昨天":2===a?timeString="前天":a<=7?timeString=a+"天前":n.getFullYear()!==(new Date).getFullYear()?timeString=n.getFullYear()+"年"+(n.getMonth()+1)+"月"+n.getDate()+"日":timeString=n.getMonth()+1+"月"+n.getDate()+"日",t[e].textContent=timeString}}function lightbox(){window.ViewImage&&ViewImage.init(".content_g img")}function removePace(){document.querySelector("body").className="pace-done"}function jumpBack(){window.location.pathname.match(/\/posts\/(\w|\d)+\//)?window.history.go(-1):pjax.loadUrl("/")}function whenDOMReady(){navShow(),setActive("menu"),setActive("cate"),changeTimeFormate(),PAGECONFIG.is_post&&toc.init(),GLOBALCONFIG.lazyload.enable&&lazyLoadInstance.update(),GLOBALCONFIG.lightbox&&lightbox(),!1!==GLOBALCONFIG.codelimit&&extendCode.init(),PAGECONFIG.comments&&Comments()}document.addEventListener("pjax:complete",(()=>{whenDOMReady(),removePace()})),GLOBALCONFIG.lazyload.enable&&lazyloadImg(),whenDOMReady();