<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Rootlex Blog</title>
  <icon>https://blog.nalex.top/icon.png</icon>
  
  <link href="https://blog.nalex.top/atom.xml" rel="self"/>
  
  <link href="https://blog.nalex.top/"/>
  <updated>2023-01-30T02:42:40.000Z</updated>
  <id>https://blog.nalex.top/</id>
  
  <author>
    <name>Rootlex</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>使用Artalk代替不蒜子统计PV</title>
    <link href="https://blog.nalex.top/posts/a61e63c2/"/>
    <id>https://blog.nalex.top/posts/a61e63c2/</id>
    <published>2023-01-30T02:42:40.000Z</published>
    <updated>2023-01-30T02:42:40.000Z</updated>
    
    <content type="html"><![CDATA[<html><head></head><body><h2 id="Artalk统计-API-说明"><a href="#Artalk统计-API-说明" class="headerlink" title="Artalk统计 API 说明"></a>Artalk统计 API 说明</h2><p>此API可以在Artalk官方的<a href="https://artalk.js.org/http-api.html#tag/Site">Openapi</a>中找到</p><pre class="language-http pre_code" data-language="http"><code class="language-http">POST /stat</code><div class="code-expand-btn"><i class="ri-arrow-drop-down-line"></i></div></pre><h2 id="开始使用API"><a href="#开始使用API" class="headerlink" title="开始使用API"></a>开始使用API</h2><h3 id="Nuxt实现"><a href="#Nuxt实现" class="headerlink" title="Nuxt实现"></a>Nuxt实现</h3><pre class="language-javascript pre_code" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"static_warp"</span><span class="token operator">&gt;</span>      <span class="token operator">...</span><span class="token operator">...</span>    <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"static_item"</span><span class="token operator">&gt;</span>        <span class="token operator">&lt;</span>span <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"static_span"</span><span class="token operator">&gt;</span>          访问        <span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span>        <span class="token operator">&lt;</span>span <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"static_num"</span><span class="token operator">&gt;</span>          <span class="token punctuation">{</span><span class="token punctuation">{</span> pv<span class="token punctuation">.</span>success <span class="token operator">?</span> pv<span class="token punctuation">.</span>data <span class="token operator">:</span> <span class="token string">'无法获取'</span> <span class="token punctuation">}</span><span class="token punctuation">}</span>        <span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span>    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>    <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"static_item"</span><span class="token operator">&gt;</span>        <span class="token operator">&lt;</span>span <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"static_span"</span><span class="token operator">&gt;</span>          评论        <span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span>      <span class="token operator">&lt;</span>span <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"static_num"</span><span class="token operator">&gt;</span>          <span class="token punctuation">{</span><span class="token punctuation">{</span> comments<span class="token punctuation">.</span>success <span class="token operator">?</span> comments<span class="token punctuation">.</span>data <span class="token operator">:</span> <span class="token string">'无法获取'</span> <span class="token punctuation">}</span><span class="token punctuation">}</span>        <span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span>    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>      <span class="token operator">...</span><span class="token operator">...</span>  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span><span class="token operator">&lt;</span>script setup lang<span class="token operator">=</span><span class="token string">"ts"</span><span class="token operator">&gt;</span>  <span class="token comment">/*    侧栏统计组件   */</span>  <span class="token keyword">import</span> <span class="token punctuation">{</span> onMounted <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"#imports"</span><span class="token punctuation">;</span>  <span class="token keyword">const</span> pv <span class="token operator">=</span> <span class="token function">useLazyAsyncData</span><span class="token punctuation">(</span><span class="token string">'pv'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">$fetch</span><span class="token punctuation">(</span><span class="token string">'https://你的Artalk域名/api/stat'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>    <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">'post'</span><span class="token punctuation">,</span>    <span class="token literal-property property">headers</span><span class="token operator">:</span> <span class="token punctuation">{</span>      <span class="token string-property property">'origin'</span><span class="token operator">:</span> <span class="token string">'你的源站'</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token literal-property property">query</span><span class="token operator">:</span> <span class="token punctuation">{</span>      <span class="token string-property property">'type'</span><span class="token operator">:</span> <span class="token string">'site_pv'</span><span class="token punctuation">,</span>      <span class="token string-property property">'site_name'</span><span class="token operator">:</span> <span class="token string">'Rootlex 的博客'</span><span class="token punctuation">,</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'无法获取PV'</span><span class="token punctuation">)</span>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>data  <span class="token keyword">const</span> comments <span class="token operator">=</span> <span class="token function">useLazyAsyncData</span><span class="token punctuation">(</span><span class="token string">'comments'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">$fetch</span><span class="token punctuation">(</span><span class="token string">'https://你的Artalk域名/api/stat'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>      <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">'post'</span><span class="token punctuation">,</span>      <span class="token literal-property property">headers</span><span class="token operator">:</span> <span class="token punctuation">{</span>        <span class="token string-property property">'origin'</span><span class="token operator">:</span> <span class="token string">'你的源站'</span>      <span class="token punctuation">}</span><span class="token punctuation">,</span>      <span class="token literal-property property">query</span><span class="token operator">:</span> <span class="token punctuation">{</span>        <span class="token string-property property">'type'</span><span class="token operator">:</span> <span class="token string">'site_comment'</span><span class="token punctuation">,</span>        <span class="token string-property property">'site_name'</span><span class="token operator">:</span> <span class="token string">'你站点的名字'</span><span class="token punctuation">,</span>      <span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'无法获取总comments数'</span><span class="token punctuation">)</span>    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>data  <span class="token function">onMounted</span><span class="token punctuation">(</span><span class="token keyword">async</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>    <span class="token keyword">await</span> <span class="token function">$fetch</span><span class="token punctuation">(</span><span class="token string">'https://你的Artalk域名/api/pv'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>      <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">'post'</span><span class="token punctuation">,</span>      <span class="token literal-property property">query</span><span class="token operator">:</span> <span class="token punctuation">{</span>        <span class="token string-property property">'page_key'</span><span class="token operator">:</span> <span class="token string">'你的源站'</span><span class="token punctuation">,</span>        <span class="token string-property property">'site_name'</span><span class="token operator">:</span> <span class="token string">'Rootlex 的博客'</span><span class="token punctuation">,</span>      <span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'无法提交PV'</span><span class="token punctuation">)</span>    <span class="token punctuation">}</span><span class="token punctuation">)</span>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span></code><div class="code-expand-btn"><i class="ri-arrow-drop-down-line"></i></div></pre><p>在使用 <code>useLazyAsyncData</code> 需要传入 <code>origin</code>，因为服务端并不知道你的 <code>origin</code> 所以不会自动传入。如果我们不传入Artalk会阻止我们访问API。而在组件完成挂载后（<code>onMounted</code>）请求则不用传入。</p><p><strong>这里我在组件挂载后请求了 <code>/api/pv</code> 这个接口，用来增加和统计首页的PV</strong></p><h3 id="原生JS实现"><a href="#原生JS实现" class="headerlink" title="原生JS实现"></a>原生JS实现</h3><p>原生JS可以通过 <code>promise.all</code> 和 <code>fetch</code> 实现，<strong>此方法尚未经过博主测试，请谨慎使用</strong>，但JS写法应该是差不多的</p><pre class="language-javascript pre_code" data-language="javascript"><code class="language-javascript"><span class="token keyword">const</span> siteName <span class="token operator">=</span> <span class="token string">'站点名称'</span><span class="token function">onload</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>    <span class="token keyword">const</span> <span class="token punctuation">[</span>pv<span class="token punctuation">,</span> comments<span class="token punctuation">,</span> postpv<span class="token punctuation">]</span> <span class="token operator">=</span> Promise<span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token punctuation">[</span>        <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">'https://你的Artalk域名/api/stat'</span> <span class="token operator">+</span> <span class="token string">'?type=site_pv'</span> <span class="token operator">+</span> <span class="token string">'?site_name='</span> <span class="token operator">+</span> siteName<span class="token punctuation">,</span> <span class="token punctuation">{</span>            <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">'post'</span><span class="token punctuation">,</span>        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>            console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">'无法获取PV'</span><span class="token punctuation">)</span>        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>        <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">'https://你的Artalk域名/api/stat'</span> <span class="token operator">+</span> <span class="token string">'?type=site_comment'</span> <span class="token operator">+</span> <span class="token string">'?site_name='</span> <span class="token operator">+</span> siteName<span class="token punctuation">,</span> <span class="token punctuation">{</span>            <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">'post'</span><span class="token punctuation">,</span>        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>            console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">'无法获取总comments数'</span><span class="token punctuation">)</span>        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>        <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">'https://你的Artalk域名/api/pv'</span> <span class="token operator">+</span> <span class="token string">'?page_key='</span> <span class="token operator">+</span> window<span class="token punctuation">.</span>location<span class="token punctuation">,</span> <span class="token punctuation">{</span>            <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">'post'</span>        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>            console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">'提交PV失败'</span><span class="token punctuation">)</span>        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>        console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">'error'</span><span class="token punctuation">)</span>    <span class="token punctuation">}</span><span class="token punctuation">)</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>pv<span class="token punctuation">,</span>comments<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span></code><div class="code-expand-btn"><i class="ri-arrow-drop-down-line"></i></div></pre></body></html>]]></content>
    
    
    <summary type="html">ai: 这篇文章介绍了如何通过Artalk的OpenAPI使用ARTALK统计API，并提供了NUXT实现和原生JS实现的示例。对于NUXT实现，需要在组件完成挂载后请求，并传入origin；而对于原生JS实现，可以通过promise.all和fetch来实现。</summary>
    
    
    
    <category term="教程" scheme="https://blog.nalex.top/categories/%E6%95%99%E7%A8%8B/"/>
    
    
    <category term="Artalk" scheme="https://blog.nalex.top/tags/Artalk/"/>
    
  </entry>
  
  <entry>
    <title>Artalk部署教程</title>
    <link href="https://blog.nalex.top/posts/b19848b6/"/>
    <id>https://blog.nalex.top/posts/b19848b6/</id>
    <published>2023-01-29T13:49:40.000Z</published>
    <updated>2023-01-29T13:49:40.000Z</updated>
    
    <content type="html"><![CDATA[<html><head></head><body><h2 id="安装Docker环境"><a href="#安装Docker环境" class="headerlink" title="安装Docker环境"></a>安装Docker环境</h2><p>Docker是一个开源的应用容器引擎，我们可以使用它部署并运行Artalk。Docker安装很简单我们可以使用一键安装脚本，这里以Ubuntu为例，在命令行输入</p><pre class="language-bash pre_code" data-language="bash"><code class="language-bash"><span class="token function">curl</span> <span class="token parameter variable">-fsSL</span> https://get.docker.com <span class="token operator">|</span> <span class="token function">bash</span> <span class="token parameter variable">-s</span> <span class="token function">docker</span> <span class="token parameter variable">--mirror</span> Aliyun</code><div class="code-expand-btn"><i class="ri-arrow-drop-down-line"></i></div></pre><p>安装完成后在命令行输入</p><pre class="language-bash pre_code" data-language="bash"><code class="language-bash"><span class="token function">docker</span> <span class="token parameter variable">-v</span> </code><div class="code-expand-btn"><i class="ri-arrow-drop-down-line"></i></div></pre><p><img src="https://bu.dusays.com/2023/01/30/63d70e78ed0e2.webp" alt="docker-v"></p><p>检查Docker是否成功安装，如果成功输出Docker版本那就说明安装成功了！</p><h2 id="安装Caddy"><a href="#安装Caddy" class="headerlink" title="安装Caddy"></a>安装Caddy</h2><p>Caddy是一款基于Go语言编写的强大且可扩展的平台，可以给你的站点、服务和应用程序提供服务。使用Caddy我们可以很容易实现反代功能，并且Caddy会根据域名自动帮您签发SSL证书。Caddy安装比Docker安装相对复杂一些，我们需要在命令行运行一下命令</p><pre class="language-bash pre_code" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> <span class="token parameter variable">-y</span> debian-keyring debian-archive-keyring apt-transport-https<span class="token function">curl</span> <span class="token parameter variable">-1sLf</span> <span class="token string">'https://dl.cloudsmith.io/public/caddy/stable/gpg.key'</span> <span class="token operator">|</span> <span class="token function">sudo</span> gpg <span class="token parameter variable">--dearmor</span> <span class="token parameter variable">-o</span> /usr/share/keyrings/caddy-stable-archive-keyring.gpg<span class="token function">curl</span> <span class="token parameter variable">-1sLf</span> <span class="token string">'https://dl.cloudsmith.io/public/caddy/stable/debian.deb.txt'</span> <span class="token operator">|</span> <span class="token function">sudo</span> <span class="token function">tee</span> /etc/apt/sources.list.d/caddy-stable.list<span class="token function">sudo</span> <span class="token function">apt</span> update<span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> caddy</code><div class="code-expand-btn"><i class="ri-arrow-drop-down-line"></i></div></pre><p>安装完成后在命令行输入</p><pre class="language-bash pre_code" data-language="bash"><code class="language-bash">caddy <span class="token parameter variable">-v</span> </code><div class="code-expand-btn"><i class="ri-arrow-drop-down-line"></i></div></pre><p><img src="https://bu.dusays.com/2023/01/30/63d70e7863dc6.webp" alt="caddy-v"></p><p>检查Caddy是否成功安装，如果成功输出Caddy版本那就说明安装成功了！</p><h2 id="安装Artalk"><a href="#安装Artalk" class="headerlink" title="安装Artalk"></a>安装Artalk</h2><p>使用Docker运行部署需要在命令行输入</p><pre class="language-bash pre_code" data-language="bash"><code class="language-bash"><span class="token function">docker</span> run <span class="token parameter variable">-d</span> <span class="token punctuation">\</span>    <span class="token parameter variable">--name</span> artalk <span class="token punctuation">\</span>    <span class="token parameter variable">-p</span> <span class="token number">8080</span>:23366 <span class="token punctuation">\</span>    <span class="token parameter variable">-v</span> <span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">pwd</span><span class="token variable">)</span></span>/data:/data <span class="token punctuation">\</span>    artalk/artalk-go</code><div class="code-expand-btn"><i class="ri-arrow-drop-down-line"></i></div></pre><p>在执行完成后输入</p><pre class="language-bash pre_code" data-language="bash"><code class="language-bash"><span class="token function">docker</span> <span class="token function">ps</span></code><div class="code-expand-btn"><i class="ri-arrow-drop-down-line"></i></div></pre><p>当显示以下界面就说明Artalk已经成功部署并运行</p><p><img src="https://bu.dusays.com/2023/01/30/63d70e776f8d5.webp" alt="docker ps"></p><p>我们只需要开放 <code>8080</code> 端口通过IP访问，如果能成功访问并出现出现 Artalk 后台登陆界面就说明OK了</p><p><img src="https://bu.dusays.com/2023/01/30/63d70e76e3734.webp" alt="ui"></p><p>然后我们输入一下命令去创建管理员账户</p><pre class="language-bash pre_code" data-language="bash"><code class="language-bash"><span class="token function">docker</span> <span class="token builtin class-name">exec</span> <span class="token parameter variable">-it</span> artalk artalk admin</code><div class="code-expand-btn"><i class="ri-arrow-drop-down-line"></i></div></pre><h2 id="使用Caddy进行反代"><a href="#使用Caddy进行反代" class="headerlink" title="使用Caddy进行反代"></a>使用Caddy进行反代</h2><p>我们进入通过CD进入 <code>/etc/caddy/</code>  文件夹然后编辑 <code>Caddyfile</code> 文件</p><pre class="language-diff pre_code" data-language="diff"><code class="language-diff"># The Caddyfile is an easy way to configure your Caddy web server.## Unless the file starts with a global options block, the first# uncommented line is always the address of your site.## To use your own domain name (with automatic HTTPS), first make# sure your domain's A/AAAA DNS records are properly pointed to# this machine's public IP, then replace ":80" below with your# domain name.:80 {# Set this path to your site's directory.root * /usr/share/caddy# Enable the static file server.file_server# Another common task is to set up a reverse proxy:# reverse_proxy localhost:8080# Or serve a PHP site through php-fpm:# php_fastcgi localhost:9000}<span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line"> 你的域名 {</span><span class="token prefix inserted">+</span><span class="token line"> reverse_proxy localhost:8080</span><span class="token prefix inserted">+</span><span class="token line"> }</span></span></code><div class="code-expand-btn"><i class="ri-arrow-drop-down-line"></i></div></pre><p>然后记得保存，我们在命令行中输入</p><pre class="language-bash pre_code" data-language="bash"><code class="language-bash">caddy reload</code><div class="code-expand-btn"><i class="ri-arrow-drop-down-line"></i></div></pre><p><img src="https://bu.dusays.com/2023/01/30/63d710b74700b.webp" alt="caddy reload"></p><p>去重启Caddy服务，然后访问 <code>https://你的域名</code> 即可</p><h2 id="写在最后"><a href="#写在最后" class="headerlink" title="写在最后"></a>写在最后</h2><ol><li>为什么我不用宝塔？宝塔虽然方便但个人认为宝塔问题比较多且还有广告影响体验</li><li>为什么我不用Nginx或Apache这种老牌站点管理器呢？因为Caddy简单易上手，而且能自动签发SSL证书，虽然Caddy性能并不出众但给个人使用还是绰绰有余了</li><li>为什么要用Artalk？因为Artalk功能相比于其他评论系统的功能是比较丰富，它不仅有评论功能还有PV统计、随机页面、随机评论等额外功能</li></ol><p><strong>参考：</strong></p><p><a href="https://artalk.js.org/guide/deploy.html">部署Artalk</a><br><a href="https://www.docker.com/">Docker安装</a><br><a href="https://caddyserver.com/">Caddy使用</a></p></body></html>]]></content>
    
    
    <summary type="html">ai: 这篇文章介绍了如何通过Docker和CADDY来部署Artalk评论系统。首先介绍了Docker和CADDY的安装方法，然后详细说明了如何使用Docker来安装和启动Artalk，并开放端口进行访问。最后介绍了如何使用CADDY进行反代并访问。文章还解答了为什么不用宝塔、Nginx或Apache这些老牌站点管理器，以及为什么选择Artalk的原因。</summary>
    
    
    
    <category term="教程" scheme="https://blog.nalex.top/categories/%E6%95%99%E7%A8%8B/"/>
    
    
    <category term="Artalk" scheme="https://blog.nalex.top/tags/Artalk/"/>
    
  </entry>
  
  <entry>
    <title>新的界面，新的开始</title>
    <link href="https://blog.nalex.top/posts/7a70876f/"/>
    <id>https://blog.nalex.top/posts/7a70876f/</id>
    <published>2023-01-24T03:20:00.000Z</published>
    <updated>2023-01-24T03:20:00.000Z</updated>
    
    <content type="html"><![CDATA[<html><head></head><body><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>一直想写一个新的博客，但是一直没有啥好点子，最近看到<a href="https://pixit.cn/">Pix</a>主题，觉得有很多地方可以借鉴一下，于是便诞生这个新的博客。</p><h2 id="技术选型"><a href="#技术选型" class="headerlink" title="技术选型"></a>技术选型</h2><p>最近刚学完Typescript和Nuxt3就决定要用到它们来写。</p><ol><li>一开始想的是前后端分离，于是就想到之前买的<a href="https://inis.cc/">inis</a>，但是我太菜不会用Docker部署PHP+ThinkPHP环境，我又不想用宝塔，于是就忽略掉这个选项</li><li>然后就是Strapi，Strapi是一个非常不错的框架，但是我在部署时遇到些问题，于是也放弃这个选项</li><li>之后有用一些CMS系统，都不太让我满意</li></ol><p>偶然一次我在Nuxt modules中看到 <a href="https://content.nuxtjs.org/">Nuxt Content</a> 这个系统觉得挺不错的，而且还不用服务器，于是就用它了</p><p><strong>最终所用到的技术和库</strong></p><p>技术: Vue.js + Nuxt + Nuxt Content + Vite + Typescript</p><p>库: Feed + Nuxt/sitemap</p><p>评论系统: <a href="https://artalk.js.org/">Artalk</a></p><h2 id="开发过程中踩的“坑”"><a href="#开发过程中踩的“坑”" class="headerlink" title="开发过程中踩的“坑”"></a>开发过程中踩的“坑”</h2><h3 id="Nuxt-SSR-不支持一些客户端的方法"><a href="#Nuxt-SSR-不支持一些客户端的方法" class="headerlink" title="Nuxt SSR 不支持一些客户端的方法"></a>Nuxt SSR 不支持一些客户端的方法</h3><p>Nuxt SSR 不支持一些客户端的方法，如: Window, document，所以导航栏的fixed效果就不能在服务端渲染，解决方案有两种</p><ol><li>在 <code>nuxt.config.ts</code> 添加外部JS将导航栏fixed逻辑代码写进JS中</li><li>使用Nuxt官方的API方法 <code>&lt;client-only&gt;</code> 让代码在客户端中运行</li></ol><h3 id="Artalk评论接入存在问题"><a href="#Artalk评论接入存在问题" class="headerlink" title="Artalk评论接入存在问题"></a>Artalk评论接入存在问题</h3><p><img src="https://bu.dusays.com/2023/01/23/63ce68079d404.webp" alt="Artalk接入问题"></p><p>我暂时不知道是什么导致的，所以使用了个替代方案如下</p><p><strong>我的解决方法:</strong> 增加点击加载评论方法，让页面完全加载完成后在进行评论初始化</p><h2 id="写在最后"><a href="#写在最后" class="headerlink" title="写在最后"></a>写在最后</h2><p><a href="https://blog.nalex.top/atom.xml">atom订阅</a><br><a href="https://blog.nalex.top/sitemap.xml">sitemap</a></p><p>目前博客部署在Vercel, CDN用的是<a href="https://my.farcdn.net/">Farcdn</a></p></body></html>]]></content>
    
    
    <summary type="html">ai: 这篇文章介绍了作者开发新博客时的技术选型、开发过程中踩到的“坑”，以及最终所用到的技术和库。作者选择使用Vue.js + Nuxt + Nuxt Content + Vite + Typescript等技术，以及Feed和Nuxt/sitemap等库，并接入了Artalk评论系统。在开发过程中遇到了NUXT SSR不支持一些客户端方法和Artalk评论接入问题，解决方案有两种。最后，作者将博客部署在Vercel上，CDN则采用Farcdn。</summary>
    
    
    
    <category term="折腾" scheme="https://blog.nalex.top/categories/%E6%8A%98%E8%85%BE/"/>
    
    
    <category term="主题" scheme="https://blog.nalex.top/tags/%E4%B8%BB%E9%A2%98/"/>
    
    <category term="Nuxt" scheme="https://blog.nalex.top/tags/Nuxt/"/>
    
    <category term="Nuxt content" scheme="https://blog.nalex.top/tags/Nuxt-content/"/>
    
  </entry>
  
  <entry>
    <title>Waline实现动态说说</title>
    <link href="https://blog.nalex.top/posts/c323bf04/"/>
    <id>https://blog.nalex.top/posts/c323bf04/</id>
    <published>2022-11-19T13:46:56.000Z</published>
    <updated>2022-11-19T13:46:56.000Z</updated>
    
    <content type="html"><![CDATA[<html><head></head><body><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>看到许多大佬都拥有自己的说说，于是便想弄一个自己的说说，但是<a href="https://blog.zhheo.com/">@heo</a>的静态说说缺点很明显，而<a href="https://bb.js.org/">bbtalk</a>，<a href="https://artitalk.js.org/doc.html">artialk</a>和<a href="https://www.antmoe.com/bb/">小康bb</a>都需要额外部署，于是我就想到了用评论系统，这样子既方便又不用二次部署</p><p><img src="https://bu.dusays.com/2022/11/19/6378e1ab4be3a.png" alt="说说demo"></p><p><strong>优点</strong></p><ol><li>没有本地局限性</li><li>支持heo同款瀑布流</li><li>无需额外部署</li></ol><h2 id="引入js代码"><a href="#引入js代码" class="headerlink" title="引入js代码"></a>引入js代码</h2><p>在 <code>custom.js</code> 加入以下代码</p><pre class="language-javascript pre_code" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> percentFlag <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span> <span class="token comment">// 节流阀</span><span class="token keyword">var</span> rootlex_musicPlaying <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span><span class="token keyword">var</span> talksurl <span class="token operator">=</span>  <span class="token string">'https://xxx.xxx.xxx'</span><span class="token punctuation">;</span><span class="token keyword">var</span> talkspath <span class="token operator">=</span> <span class="token string">'/talks/'</span><span class="token punctuation">;</span><span class="token keyword">function</span> <span class="token function">essayScroll</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">let</span> a <span class="token operator">=</span> document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>scrollTop <span class="token operator">||</span> window<span class="token punctuation">.</span>pageYOffset<span class="token punctuation">;</span> <span class="token comment">// 卷去高度</span>    <span class="token keyword">const</span> waterfallResult <span class="token operator">=</span> a <span class="token operator">%</span> document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>clientHeight<span class="token punctuation">;</span> <span class="token comment">// 卷去一个视口</span>    result <span class="token operator">&lt;=</span> <span class="token number">99</span> <span class="token operator">||</span> <span class="token punctuation">(</span>result <span class="token operator">=</span> <span class="token number">99</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>        <span class="token operator">!</span>percentFlag <span class="token operator">&amp;&amp;</span>        waterfallResult <span class="token operator">+</span> <span class="token number">100</span> <span class="token operator">&gt;=</span> document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>clientHeight <span class="token operator">&amp;&amp;</span>        document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">"#waterfall"</span><span class="token punctuation">)</span>    <span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment">// console.info(waterfallResult, document.documentElement.clientHeight);</span>        <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>            <span class="token function">waterfall</span><span class="token punctuation">(</span><span class="token string">"#waterfall"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>        <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>            document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">"#waterfall"</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token function">waterfall</span><span class="token punctuation">(</span><span class="token string">"#waterfall"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">const</span> r <span class="token operator">=</span> window<span class="token punctuation">.</span>scrollY <span class="token operator">+</span> document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>clientHeight<span class="token punctuation">;</span>    <span class="token keyword">let</span> p <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"post-comment"</span><span class="token punctuation">)</span> <span class="token operator">||</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"footer"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">(</span>p<span class="token punctuation">.</span>offsetTop <span class="token operator">+</span> p<span class="token punctuation">.</span>offsetHeight <span class="token operator">/</span> <span class="token number">2</span> <span class="token operator">&lt;</span> r <span class="token operator">||</span> <span class="token number">90</span> <span class="token operator">&lt;</span> result<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>percentFlag <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">function</span> <span class="token function">replaceAll</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span> n<span class="token punctuation">,</span> t</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> e<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">var</span> rootlex <span class="token operator">=</span> <span class="token punctuation">{</span>    <span class="token function">getTalks</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token function">fetch</span><span class="token punctuation">(</span>talksurl <span class="token operator">+</span> <span class="token string">'/comment?path='</span> <span class="token operator">+</span> talkspath<span class="token punctuation">)</span>            <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>                <span class="token keyword">return</span> res<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span>            <span class="token punctuation">}</span><span class="token punctuation">)</span>            <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">json</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>                <span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> talksdata <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span>                <span class="token keyword">while</span> <span class="token punctuation">(</span>i <span class="token operator">&lt;</span> json<span class="token punctuation">.</span>count<span class="token punctuation">)</span><span class="token punctuation">{</span>                    <span class="token keyword">if</span> <span class="token punctuation">(</span>json<span class="token punctuation">.</span>data<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>type <span class="token operator">==</span> <span class="token string">'administrator'</span><span class="token punctuation">)</span><span class="token punctuation">{</span>                        talksdata <span class="token operator">+=</span> <span class="token string">'&lt;li class="bber-item"&gt;&lt;div class="bber-content"&gt;'</span> <span class="token operator">+</span> json<span class="token punctuation">.</span>data<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>comment <span class="token operator">+</span> <span class="token string">'&lt;/div&gt;&lt;hr&gt;&lt;div class="bber-bottom"&gt;&lt;div class="bber-info"&gt;&lt;div class="bber-info-time"&gt;&lt;i class="far fa-clock"&gt;&lt;/i&gt;&lt;time class="datatime" style="display: inline;"&gt;'</span> <span class="token operator">+</span> <span class="token function">dayjs</span><span class="token punctuation">(</span>json<span class="token punctuation">.</span>data<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>createdAt<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">'YYYY/MM/DD'</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">'&lt;/time&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;'</span>                    <span class="token punctuation">}</span>                    i<span class="token operator">++</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span>                document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'waterfall'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>innerHTML<span class="token operator">=</span>talksdata<span class="token punctuation">;</span>                rootlex<span class="token punctuation">.</span><span class="token function">reflashEssayWaterFall</span><span class="token punctuation">(</span><span class="token punctuation">)</span>            <span class="token punctuation">}</span><span class="token punctuation">)</span>            <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">err</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token function-variable function">reflashEssayWaterFall</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">"#waterfall"</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span>        <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token function">waterfall</span><span class="token punctuation">(</span><span class="token string">"#waterfall"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"waterfall"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"show"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">;</span>rootlex<span class="token punctuation">.</span><span class="token function">reflashEssayWaterFall</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><div class="code-expand-btn"><i class="ri-arrow-drop-down-line"></i></div></pre><p><strong>参数解析</strong></p><table><thead><tr><th>变量</th><th>功能</th></tr></thead><tbody><tr><td>talksurl</td><td>你的waline链接</td></tr><tr><td>talkspath</td><td>说说页面链接 e.g. /talks/</td></tr></tbody></table><h2 id="新建waterfall文件"><a href="#新建waterfall文件" class="headerlink" title="新建waterfall文件"></a>新建waterfall文件</h2><p>新建一个名为 <code>waterfall.js</code> 的文件，加入一下代码</p><pre class="language-javascript pre_code" data-language="javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">waterfall</span><span class="token punctuation">(</span><span class="token parameter">a</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">function</span> <span class="token function">b</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span>b</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">var</span> c<span class="token operator">=</span>window<span class="token punctuation">.</span><span class="token function">getComputedStyle</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">return</span> <span class="token function">parseFloat</span><span class="token punctuation">(</span>c<span class="token punctuation">[</span><span class="token string">"margin"</span><span class="token operator">+</span>a<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">||</span><span class="token number">0</span><span class="token punctuation">}</span><span class="token keyword">function</span> <span class="token function">c</span><span class="token punctuation">(</span><span class="token parameter">a</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">return</span> a<span class="token operator">+</span><span class="token string">"px"</span><span class="token punctuation">}</span><span class="token keyword">function</span> <span class="token function">d</span><span class="token punctuation">(</span><span class="token parameter">a</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">return</span> <span class="token function">parseFloat</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span>style<span class="token punctuation">.</span>top<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token keyword">function</span> <span class="token function">e</span><span class="token punctuation">(</span><span class="token parameter">a</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">return</span> <span class="token function">parseFloat</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span>style<span class="token punctuation">.</span>left<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token keyword">function</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token parameter">a</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">return</span> a<span class="token punctuation">.</span>clientWidth<span class="token punctuation">}</span><span class="token keyword">function</span> <span class="token function">g</span><span class="token punctuation">(</span><span class="token parameter">a</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">return</span> a<span class="token punctuation">.</span>clientHeight<span class="token punctuation">}</span><span class="token keyword">function</span> <span class="token function">h</span><span class="token punctuation">(</span><span class="token parameter">a</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">return</span> <span class="token function">d</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token operator">+</span><span class="token function">g</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token operator">+</span><span class="token function">b</span><span class="token punctuation">(</span><span class="token string">"Bottom"</span><span class="token punctuation">,</span>a<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token keyword">function</span> <span class="token function">i</span><span class="token punctuation">(</span><span class="token parameter">a</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">return</span> <span class="token function">e</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token operator">+</span><span class="token function">f</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token operator">+</span><span class="token function">b</span><span class="token punctuation">(</span><span class="token string">"Right"</span><span class="token punctuation">,</span>a<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token keyword">function</span> <span class="token function">j</span><span class="token punctuation">(</span><span class="token parameter">a</span><span class="token punctuation">)</span><span class="token punctuation">{</span>a<span class="token operator">=</span>a<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span>b</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">return</span> <span class="token function">h</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token operator">===</span><span class="token function">h</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token operator">?</span><span class="token function">e</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token operator">-</span><span class="token function">e</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token operator">:</span><span class="token function">h</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token operator">-</span><span class="token function">h</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token keyword">function</span> <span class="token function">k</span><span class="token punctuation">(</span><span class="token parameter">b</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token function">f</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token operator">!=</span>t<span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span>b<span class="token punctuation">.</span>target<span class="token punctuation">.</span><span class="token function">removeEventListener</span><span class="token punctuation">(</span>b<span class="token punctuation">.</span>type<span class="token punctuation">,</span>arguments<span class="token punctuation">.</span>callee<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">waterfall</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token string">"string"</span><span class="token operator">==</span><span class="token keyword">typeof</span> a<span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span>a<span class="token operator">=</span>document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">var</span> l<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span>children<span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">a</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">return</span> a<span class="token punctuation">.</span>style<span class="token punctuation">.</span>position<span class="token operator">=</span><span class="token string">"absolute"</span><span class="token punctuation">,</span>a<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>a<span class="token punctuation">.</span>style<span class="token punctuation">.</span>position<span class="token operator">=</span><span class="token string">"relative"</span><span class="token punctuation">;</span><span class="token keyword">var</span> m<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>l<span class="token punctuation">.</span>length<span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span>l<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>style<span class="token punctuation">.</span>top<span class="token operator">=</span><span class="token string">"0px"</span><span class="token punctuation">,</span>l<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>style<span class="token punctuation">.</span>left<span class="token operator">=</span><span class="token function">c</span><span class="token punctuation">(</span><span class="token function">b</span><span class="token punctuation">(</span><span class="token string">"Left"</span><span class="token punctuation">,</span>l<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>m<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>l<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> n<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>n<span class="token operator">&lt;</span>l<span class="token punctuation">.</span>length<span class="token punctuation">;</span>n<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">var</span> o<span class="token operator">=</span>l<span class="token punctuation">[</span>n<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span>p<span class="token operator">=</span>l<span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">,</span>q<span class="token operator">=</span><span class="token function">i</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span><span class="token operator">+</span><span class="token function">f</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token operator">&lt;=</span><span class="token function">f</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>q<span class="token punctuation">)</span><span class="token keyword">break</span><span class="token punctuation">;</span>p<span class="token punctuation">.</span>style<span class="token punctuation">.</span>top<span class="token operator">=</span>o<span class="token punctuation">.</span>style<span class="token punctuation">.</span>top<span class="token punctuation">,</span>p<span class="token punctuation">.</span>style<span class="token punctuation">.</span>left<span class="token operator">=</span><span class="token function">c</span><span class="token punctuation">(</span><span class="token function">i</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span><span class="token operator">+</span><span class="token function">b</span><span class="token punctuation">(</span><span class="token string">"Left"</span><span class="token punctuation">,</span>p<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>m<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token punctuation">;</span>n<span class="token operator">&lt;</span>l<span class="token punctuation">.</span>length<span class="token punctuation">;</span>n<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token function">j</span><span class="token punctuation">(</span>m<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">var</span> p<span class="token operator">=</span>l<span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">,</span>r<span class="token operator">=</span>m<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>p<span class="token punctuation">.</span>style<span class="token punctuation">.</span>top<span class="token operator">=</span><span class="token function">c</span><span class="token punctuation">(</span><span class="token function">h</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span><span class="token operator">+</span><span class="token function">b</span><span class="token punctuation">(</span><span class="token string">"Top"</span><span class="token punctuation">,</span>p<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>p<span class="token punctuation">.</span>style<span class="token punctuation">.</span>left<span class="token operator">=</span><span class="token function">c</span><span class="token punctuation">(</span><span class="token function">e</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>m<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token function">j</span><span class="token punctuation">(</span>m<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">var</span> s<span class="token operator">=</span>m<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>a<span class="token punctuation">.</span>style<span class="token punctuation">.</span>height<span class="token operator">=</span><span class="token function">c</span><span class="token punctuation">(</span><span class="token function">h</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token operator">+</span><span class="token function">b</span><span class="token punctuation">(</span><span class="token string">"Bottom"</span><span class="token punctuation">,</span>s<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">var</span> t<span class="token operator">=</span><span class="token function">f</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>window<span class="token punctuation">.</span>addEventListener<span class="token operator">?</span>window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"resize"</span><span class="token punctuation">,</span>k<span class="token punctuation">)</span><span class="token operator">:</span>document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>onresize<span class="token operator">=</span>k<span class="token punctuation">}</span></code><div class="code-expand-btn"><i class="ri-arrow-drop-down-line"></i></div></pre><h2 id="引入css样式"><a href="#引入css样式" class="headerlink" title="引入css样式"></a>引入css样式</h2><p>在 <code>custom.css</code> 引入代码</p><pre class="language-css pre_code" data-language="css"><code class="language-css"><span class="token selector">#page:has(#essay_page)</span> <span class="token punctuation">{</span>    <span class="token property">border</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>    <span class="token property">box-shadow</span><span class="token punctuation">:</span> none <span class="token important">!important</span><span class="token punctuation">;</span>    <span class="token property">padding</span><span class="token punctuation">:</span> 0 <span class="token important">!important</span><span class="token punctuation">;</span>    <span class="token property">background</span><span class="token punctuation">:</span> transparent <span class="token important">!important</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token selector">.layout.hide-aside</span> <span class="token punctuation">{</span>    <span class="token property">max-width</span><span class="token punctuation">:</span> 1400px <span class="token important">!important</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token selector">#page:has(#essay_page) .page-title</span> <span class="token punctuation">{</span>    <span class="token property">display</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token selector">#web_bg ~ .page:has(#essay_page)</span> <span class="token punctuation">{</span>    <span class="token property">background</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--rootlex-background<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token selector">#bber .bber-content .datacont</span> <span class="token punctuation">{</span>    <span class="token property">order</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>    <span class="token property">font-size</span><span class="token punctuation">:</span> 0.8rem<span class="token punctuation">;</span>    <span class="token property">font-weight</span><span class="token punctuation">:</span> 700<span class="token punctuation">;</span>    <span class="token property">color</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--rootlex-fontcolor<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>    <span class="token property">line-height</span><span class="token punctuation">:</span> 1.38<span class="token punctuation">;</span>    <span class="token property">border-radius</span><span class="token punctuation">:</span> 12px<span class="token punctuation">;</span>    <span class="token property">margin-bottom</span><span class="token punctuation">:</span> 0.5rem<span class="token punctuation">;</span>    <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>    <span class="token property">flex-direction</span><span class="token punctuation">:</span> column<span class="token punctuation">;</span>    <span class="token property">text-align</span><span class="token punctuation">:</span> justify<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token selector">#bber p</span> <span class="token punctuation">{</span>    <span class="token property">margin</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token selector">#bber div.bber-content</span> <span class="token punctuation">{</span>    <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>    <span class="token property">flex-flow</span><span class="token punctuation">:</span> wrap<span class="token punctuation">;</span>    <span class="token property">border-radius</span><span class="token punctuation">:</span> 12px<span class="token punctuation">;</span>    <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>    <span class="token property">height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token selector">#bber .timeline ul li.bber-item</span> <span class="token punctuation">{</span>    <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>    <span class="token property">width</span><span class="token punctuation">:</span> 32%<span class="token punctuation">;</span>    <span class="token property">border</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--style-border-always<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token property">border-radius</span><span class="token punctuation">:</span> 12px<span class="token punctuation">;</span>    <span class="token property">padding</span><span class="token punctuation">:</span> 1rem 1rem 0.5rem<span class="token punctuation">;</span>    <span class="token property">transition</span><span class="token punctuation">:</span> all 0.3s ease 0s<span class="token punctuation">;</span>    <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>    <span class="token property">flex-flow</span><span class="token punctuation">:</span> column nowrap<span class="token punctuation">;</span>    <span class="token property">justify-content</span><span class="token punctuation">:</span> space-between<span class="token punctuation">;</span>    <span class="token property">align-items</span><span class="token punctuation">:</span> flex-start<span class="token punctuation">;</span>    <span class="token property">background</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--rootlex-card-bg<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token property">box-shadow</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--rootlex-shadow-border<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token property">margin-right</span><span class="token punctuation">:</span> 2%<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token selector">#bber .timeline #waterfall.show</span> <span class="token punctuation">{</span>    <span class="token property">opacity</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token selector">#bber .timeline #waterfall</span> <span class="token punctuation">{</span>    <span class="token property">opacity</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>    <span class="token property">transition</span><span class="token punctuation">:</span> all 0.3s ease 0s<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token selector">#bber ul.list</span> <span class="token punctuation">{</span>    <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>    <span class="token property">flex-flow</span><span class="token punctuation">:</span> row wrap<span class="token punctuation">;</span>    <span class="token property">justify-content</span><span class="token punctuation">:</span> space-between<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token selector">#bber</span> <span class="token punctuation">{</span>    <span class="token property">margin-top</span><span class="token punctuation">:</span> 1rem<span class="token punctuation">;</span>    <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token selector">#bber &gt; section &gt; ul &gt; li.bber-item</span> <span class="token punctuation">{</span>    <span class="token property">margin-bottom</span><span class="token punctuation">:</span> 1rem<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token selector">#bber-tips</span> <span class="token punctuation">{</span>    <span class="token property">font-size</span><span class="token punctuation">:</span> 14px<span class="token punctuation">;</span>    <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>    <span class="token property">justify-content</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>    <span class="token property">margin-top</span><span class="token punctuation">:</span> 1rem<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token selector">#bber .timeline ul li.bber-item hr</span> <span class="token punctuation">{</span>    <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>    <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>    <span class="token property">margin</span><span class="token punctuation">:</span> 8px 0<span class="token punctuation">;</span>    <span class="token property">border</span><span class="token punctuation">:</span> 1px dashed <span class="token function">var</span><span class="token punctuation">(</span>--rootlex-theme-op<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token selector">#bber .bber-info</span> <span class="token punctuation">{</span>    <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>    <span class="token property">align-items</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token selector">#bber &gt; section &gt; ul &gt; li &gt; div .bber-info-time,#bber &gt; section &gt; ul &gt; li &gt; div .bber-info-from</span> <span class="token punctuation">{</span>    <span class="token property">color</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--rootlex-fontcolor<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token property">font-size</span><span class="token punctuation">:</span> 0.7rem<span class="token punctuation">;</span>    <span class="token property">background-color</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--rootlex-background<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token property">padding</span><span class="token punctuation">:</span> 0 8px<span class="token punctuation">;</span>    <span class="token property">border-radius</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span>    <span class="token property">cursor</span><span class="token punctuation">:</span> default<span class="token punctuation">;</span>    <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>    <span class="token property">align-items</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token selector">#bber .bber-info .far.fa-clock</span> <span class="token punctuation">{</span>    <span class="token property">margin-right</span><span class="token punctuation">:</span> 4px<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token selector">#bber &gt; section &gt; ul &gt; li &gt; div .bber-info-from span,#bber &gt; section &gt; ul &gt; li &gt; div .bber-info-from</span> <span class="token punctuation">{</span>    <span class="token property">margin-left</span><span class="token punctuation">:</span> 4px<span class="token punctuation">;</span>    <span class="token property">font-weight</span><span class="token punctuation">:</span> 600<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token selector">#bber .bber-bottom</span> <span class="token punctuation">{</span>    <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>    <span class="token property">justify-content</span><span class="token punctuation">:</span> space-between<span class="token punctuation">;</span>    <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>    <span class="token property">margin-top</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token selector">#bber .timeline ul li.bber-item:hover</span> <span class="token punctuation">{</span>    <span class="token property">border</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--style-border-hover<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token comment">/* 顶部样式 */</span><span class="token selector">.author-content.author-content-item.essayPage</span> <span class="token punctuation">{</span>    <span class="token property">height</span><span class="token punctuation">:</span> 19rem<span class="token punctuation">;</span>    <span class="token property">background</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>https://bu.dusays.com/2022/09/01/631068b943a16.jpg<span class="token punctuation">)</span></span> left 28% / cover no-repeat<span class="token punctuation">;</span>    <span class="token property">color</span><span class="token punctuation">:</span> #fff<span class="token punctuation">;</span>    <span class="token property">overflow</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>    <span class="token property">margin-top</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>    <span class="token property">border-radius</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span><span class="token punctuation">}</span></code><div class="code-expand-btn"><i class="ri-arrow-drop-down-line"></i></div></pre><h2 id="引入所需的文件"><a href="#引入所需的文件" class="headerlink" title="引入所需的文件"></a>引入所需的文件</h2><p>在 <code>_config.butterfly.yml</code> 中的 <code>inject</code> 加入以下代码</p><pre class="language-yaml pre_code" data-language="yaml"><code class="language-yaml"><span class="token key atrule">head</span><span class="token punctuation">:</span>  <span class="token punctuation">-</span> &lt;link rel="stylesheet" href="/css/custom.css" type="text/css"<span class="token punctuation">&gt;</span><span class="token key atrule">bottom</span><span class="token punctuation">:</span>  <span class="token punctuation">-</span> &lt;script async data<span class="token punctuation">-</span>pjax src="/js/custom.js"<span class="token punctuation">&gt;</span>&lt;/script<span class="token punctuation">&gt;</span> <span class="token comment"># 自定义js</span>  <span class="token punctuation">-</span> &lt;script async data<span class="token punctuation">-</span>pjax src="/js/waterfall.js"<span class="token punctuation">&gt;</span>&lt;/script<span class="token punctuation">&gt;</span>  <span class="token comment"># waterfall库</span>  <span class="token punctuation">-</span> &lt;script async data<span class="token punctuation">-</span>pjax src="https<span class="token punctuation">:</span>//cdn1.tianli0.top/npm/dayjs"<span class="token punctuation">&gt;</span>&lt;/script<span class="token punctuation">&gt;</span> <span class="token comment"># 日期转换库</span></code><div class="code-expand-btn"><i class="ri-arrow-drop-down-line"></i></div></pre><h2 id="创建说说pug文件"><a href="#创建说说pug文件" class="headerlink" title="创建说说pug文件"></a>创建说说pug文件</h2><p>在 <code>themes/butterfly/layout/includes/page</code> 新建一个 <code>talks.pug</code> 的文件，加入一下代码</p><pre class="language-pug pre_code" data-language="pug"><code class="language-pug"><span class="token tag"><span class="token attr-id">#essay_page</span></span>    <span class="token tag"><span class="token attr-class">.author-content</span><span class="token attr-class">.author-content-item</span><span class="token attr-class">.essayPage</span><span class="token attr-class">.single</span></span>        <span class="token tag"><span class="token attr-class">.card-content</span></span>            <span class="token tag"><span class="token attr-class">.author-content-item-tips</span></span> <span class="token plain-text">即刻短文</span>    <span class="token tag"><span class="token attr-id">#bber</span></span>        <span class="token tag">section<span class="token attr-class">.timeline</span><span class="token attr-class">.page-1</span></span>            <span class="token tag">ul<span class="token attr-id">#waterfall</span><span class="token attr-class">.list</span></span>                <span class="token tag">li<span class="token attr-class">.bber-item</span></span>                    <span class="token tag"><span class="token attr-class">.bber-content</span></span>                        <span class="token tag">p<span class="token attr-class">.datacont</span></span><span class="token punctuation">=</span><span class="token code"> <span class="token string">'加载中'</span></span>    <span class="token tag"><span class="token attr-id">#bber-tips</span><span class="token attributes"><span class="token punctuation">(</span><span class="token attr-name">style</span><span class="token punctuation">=</span><span class="token attr-value">'color<span class="token operator">:</span> <span class="token keyword">var</span><span class="token punctuation">(</span><span class="token operator">--</span>rootlex<span class="token operator">-</span>secondtext</span><span class="token punctuation">)</span></span></span>;')        <span class="token punctuation">|</span> <span class="token punctuation">-</span> 只展示最近30条短文 <span class="token punctuation">-</span><span class="token tag">script</span><span class="token punctuation">.</span><span class="token multiline-script">    rootlex<span class="token punctuation">.</span><span class="token function">getTalks</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span></code><div class="code-expand-btn"><i class="ri-arrow-drop-down-line"></i></div></pre><h2 id="增加说说type"><a href="#增加说说type" class="headerlink" title="增加说说type"></a>增加说说type</h2><p>在 <code>themes/butterfly/layout/page.pug</code> 注册说说页面</p><pre class="language-diff pre_code" data-language="diff"><code class="language-diff"><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   if top_img === false</span><span class="token prefix unchanged"> </span><span class="token line">     h1.page-title= page.title</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   case page.type</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">      when 'talks'</span><span class="token prefix inserted">+</span><span class="token line">        include includes/page/talks.pug</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">     when 'tags'</span><span class="token prefix unchanged"> </span><span class="token line">       include includes/page/tags.pug</span><span class="token prefix unchanged"> </span><span class="token line">     when 'link'</span><span class="token prefix unchanged"> </span><span class="token line">       include includes/page/flink.pug</span><span class="token prefix unchanged"> </span><span class="token line">     when 'categories'</span><span class="token prefix unchanged"> </span><span class="token line">       include includes/page/categories.pug</span><span class="token prefix unchanged"> </span><span class="token line">     default</span><span class="token prefix unchanged"> </span><span class="token line">       include includes/page/default-page.pug</span></span></code><div class="code-expand-btn"><i class="ri-arrow-drop-down-line"></i></div></pre><h2 id="新建说说页面"><a href="#新建说说页面" class="headerlink" title="新建说说页面"></a>新建说说页面</h2><p>在终端中输入 <code>hexo new page talks</code> 创建说说页面</p><p><strong>说说页面头部</strong></p><pre class="language-markdown pre_code" data-language="markdown"><code class="language-markdown"><span class="token front-matter-block"><span class="token punctuation">---</span><span class="token front-matter yaml language-yaml"><span class="token key atrule">title</span><span class="token punctuation">:</span> 说说<span class="token key atrule">date</span><span class="token punctuation">:</span> <span class="token datetime number">2022-10-11 09:37:02</span><span class="token key atrule">comments</span><span class="token punctuation">:</span> <span class="token boolean important">true</span><span class="token key atrule">aside</span><span class="token punctuation">:</span> <span class="token boolean important">false</span><span class="token key atrule">top_img</span><span class="token punctuation">:</span> <span class="token boolean important">false</span><span class="token key atrule">type</span><span class="token punctuation">:</span> talks</span><span class="token punctuation">---</span></span></code><div class="code-expand-btn"><i class="ri-arrow-drop-down-line"></i></div></pre></body></html>]]></content>
    
    
    <summary type="html">ai: 这篇文章介绍了一种用评论系统实现静态说说的方法。作者发现市面上已有的几种静态说说方案都存在一些缺点，于是想到利用评论系统来解决这个问题。文章给出了具体步骤和参数解析，包括在custom.js引入JS代码、新建waterfall.js文件、引入CSS样式、在_config.butterfly.yml中添加代码等。最后还提供了示例代码和页面头部设计。</summary>
    
    
    
    <category term="教程" scheme="https://blog.nalex.top/categories/%E6%95%99%E7%A8%8B/"/>
    
    
    <category term="说说" scheme="https://blog.nalex.top/tags/%E8%AF%B4%E8%AF%B4/"/>
    
    <category term="Waline" scheme="https://blog.nalex.top/tags/Waline/"/>
    
  </entry>
  
  <entry>
    <title>仿Heo音乐播放器</title>
    <link href="https://blog.nalex.top/posts/6177b8b5/"/>
    <id>https://blog.nalex.top/posts/6177b8b5/</id>
    <published>2022-11-13T03:25:45.000Z</published>
    <updated>2022-11-10T03:25:45.000Z</updated>
    
    <content type="html"><![CDATA[<html><head></head><body><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>在看到 <a href="https://blog.zhheo.com/">Heo</a> 的小药丸音乐播放器的设计，还挺好看的，于是便决定开抄</p><p><img src="https://bu.dusays.com/2022/11/13/637071436f2a6.png" alt="heo demo"></p><h2 id="引入音乐播放器"><a href="#引入音乐播放器" class="headerlink" title="引入音乐播放器"></a>引入音乐播放器</h2><p>首先找到 <code>_config.butterfly.yml</code> 将 <a href="https://aplayer.js.org/">aplayer</a> 引入打开</p><pre class="language-yaml pre_code" data-language="yaml"><code class="language-yaml"><span class="token key atrule">aplayerInject</span><span class="token punctuation">:</span>  <span class="token key atrule">enable</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>  <span class="token key atrule">per_page</span><span class="token punctuation">:</span> <span class="token boolean important">true</span></code><div class="code-expand-btn"><i class="ri-arrow-drop-down-line"></i></div></pre><h2 id="启用音乐播放器"><a href="#启用音乐播放器" class="headerlink" title="启用音乐播放器"></a>启用音乐播放器</h2><p>在 <code>_config.butterfly.yml</code> 中的 <code>inject</code> 加入一段代码</p><pre class="language-diff pre_code" data-language="diff"><code class="language-diff">inject:<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> head:</span><span class="token prefix unchanged"> </span><span class="token line">   - &lt;link rel="stylesheet" href="/css/custom.css" type="text/css"&gt;</span><span class="token prefix unchanged"> </span><span class="token line"> bottom:</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">    - &lt;div id="nav-music" onclick="rootlex.musicToggle()"&gt;&lt;div id="nav-music-hoverTips"&gt;音乐已暂停&lt;/div&gt;&lt;meting-js id="1708664797" server="tencent" type="playlist" mutex="true" preload="none" data-lrctype="0" order="random"&gt;&lt;/meting-js&gt;&lt;/div&gt;</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   - &lt;script data-pjax src="/js/waterfall.js"&gt;&lt;/script&gt;</span><span class="token prefix unchanged"> </span><span class="token line">   - &lt;script data-pjax src="/js/custom.js"&gt;&lt;/script&gt;</span></span></code><div class="code-expand-btn"><i class="ri-arrow-drop-down-line"></i></div></pre><p><strong>参数解析</strong></p><p><code>&lt;meting-js id="1708664797" server="tencent" type="playlist" mutex="true" preload="none" data-lrctype="0" order="random"&gt;&lt;/meting-js&gt;</code></p><table><thead><tr><th>参数</th><th>功能</th></tr></thead><tbody><tr><td>id</td><td>歌单id</td></tr><tr><td>server</td><td>音乐播放源 netease（网易）, tencent（QQ音乐）, kugou（酷狗）, xiami（虾米）, baidu（百度）</td></tr><tr><td>mutex</td><td>防止多个播放器同时播放 开：true 关：false</td></tr><tr><td>theme</td><td>播放器主色</td></tr><tr><td>order</td><td>ramdon（随机播放） 或 list（顺序播放）</td></tr></tbody></table><h2 id="添加自定义CSS"><a href="#添加自定义CSS" class="headerlink" title="添加自定义CSS"></a>添加自定义CSS</h2><p>通过 <code>custom.css</code> 引入样式</p><p><strong>颜色样式</strong></p><pre class="language-css pre_code" data-language="css"><code class="language-css"><span class="token comment">/* 颜色 */</span><span class="token selector">:root</span> <span class="token punctuation">{</span>  <span class="token property">--rootlex-theme-op</span><span class="token punctuation">:</span> #4259ef23<span class="token punctuation">;</span>  <span class="token property">--rootlex-white</span><span class="token punctuation">:</span> #fff<span class="token punctuation">;</span>  <span class="token property">--rootlex-black</span><span class="token punctuation">:</span> #000<span class="token punctuation">;</span>  <span class="token property">--rootlex-none</span><span class="token punctuation">:</span> <span class="token function">rgba</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token property">--rootlex-gray</span><span class="token punctuation">:</span> #999999<span class="token punctuation">;</span>  <span class="token property">--rootlex-yellow</span><span class="token punctuation">:</span> #ffc93e<span class="token punctuation">;</span>  <span class="token property">--rootlex-border-radius</span><span class="token punctuation">:</span> 15px<span class="token punctuation">;</span>  <span class="token property">--rootlex-main</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--rootlex-theme<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token property">--rootlex-main-op</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--rootlex-theme-op<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token property">--rootlex-shadow-theme</span><span class="token punctuation">:</span> 0 8px 12px -3px <span class="token function">var</span><span class="token punctuation">(</span>--rootlex-theme-op<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token property">--rootlex-shadow-main</span><span class="token punctuation">:</span> 0 8px 12px -3px <span class="token function">var</span><span class="token punctuation">(</span>--rootlex-main-op<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token property">--rootlex-shadow-blue</span><span class="token punctuation">:</span> 0 8px 12px -3px <span class="token function">rgba</span><span class="token punctuation">(</span>40<span class="token punctuation">,</span> 109<span class="token punctuation">,</span> 234<span class="token punctuation">,</span> 0.2<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token property">--rootlex-shadow-white</span><span class="token punctuation">:</span> 0 8px 12px -3px <span class="token function">rgba</span><span class="token punctuation">(</span>255<span class="token punctuation">,</span> 255<span class="token punctuation">,</span> 255<span class="token punctuation">,</span> 0.2<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token property">--rootlex-shadow-black</span><span class="token punctuation">:</span> 0 0 12px 4px <span class="token function">rgba</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0.05<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token property">--rootlex-shadow-yellow</span><span class="token punctuation">:</span> 0px 38px 77px -26px <span class="token function">rgba</span><span class="token punctuation">(</span>255<span class="token punctuation">,</span> 201<span class="token punctuation">,</span> 62<span class="token punctuation">,</span> 0.12<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token property">--rootlex-shadow-red</span><span class="token punctuation">:</span> 0 8px 12px -3px #ee7d7936<span class="token punctuation">;</span>  <span class="token property">--rootlex-shadow-green</span><span class="token punctuation">:</span> 0 8px 12px -3px #87ee7936<span class="token punctuation">;</span>  <span class="token property">--rootlex-shadow-border</span><span class="token punctuation">:</span> 0 8px 16px -4px #2c2d300c<span class="token punctuation">;</span>  <span class="token property">--rootlex-logo-color</span><span class="token punctuation">:</span> <span class="token function">linear-gradient</span><span class="token punctuation">(</span>215deg<span class="token punctuation">,</span> #4584ff 30%<span class="token punctuation">,</span> #ff7676 70%<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token property">--style-border</span><span class="token punctuation">:</span> 1px solid <span class="token function">var</span><span class="token punctuation">(</span>--rootlex-card-border<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token property">--rootlex-blue-main</span><span class="token punctuation">:</span> #425aef<span class="token punctuation">;</span>  <span class="token property">--style-border-hover</span><span class="token punctuation">:</span> 1px solid <span class="token function">var</span><span class="token punctuation">(</span>--rootlex-main<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token property">--style-border-dashed</span><span class="token punctuation">:</span> 1px dashed <span class="token function">var</span><span class="token punctuation">(</span>--rootlex-theme-op<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token property">--style-border-avatar</span><span class="token punctuation">:</span> 4px solid <span class="token function">var</span><span class="token punctuation">(</span>--rootlex-background<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token property">--style-border-always</span><span class="token punctuation">:</span> 1px solid <span class="token function">var</span><span class="token punctuation">(</span>--rootlex-card-border<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token property">--rootlex-white-acrylic1</span><span class="token punctuation">:</span> #fefeff <span class="token important">!important</span><span class="token punctuation">;</span>  <span class="token property">--rootlex-white-acrylic2</span><span class="token punctuation">:</span> #fcfdff <span class="token important">!important</span><span class="token punctuation">;</span>  <span class="token property">--rootlex-black-acrylic2</span><span class="token punctuation">:</span> #08080a <span class="token important">!important</span><span class="token punctuation">;</span>  <span class="token property">--rootlex-black-acrylic1</span><span class="token punctuation">:</span> #0b0b0e <span class="token important">!important</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token selector">[data-theme='light']</span> <span class="token punctuation">{</span>  <span class="token property">--rootlex-theme</span><span class="token punctuation">:</span> #425aef<span class="token punctuation">;</span>  <span class="token property">--rootlex-theme-op</span><span class="token punctuation">:</span> #4259ef23<span class="token punctuation">;</span>  <span class="token property">--rootlex-blue</span><span class="token punctuation">:</span> #425aef<span class="token punctuation">;</span>  <span class="token property">--rootlex-red</span><span class="token punctuation">:</span> #d8213c<span class="token punctuation">;</span>  <span class="token property">--rootlex-pink</span><span class="token punctuation">:</span> #ff7c7c<span class="token punctuation">;</span>  <span class="token property">--rootlex-green</span><span class="token punctuation">:</span> #57bd6a<span class="token punctuation">;</span>  <span class="token property">--rootlex-fontcolor</span><span class="token punctuation">:</span> #363636<span class="token punctuation">;</span>  <span class="token property">--rootlex-background</span><span class="token punctuation">:</span> #f7f9fe<span class="token punctuation">;</span>  <span class="token property">--rootlex-reverse</span><span class="token punctuation">:</span> #000<span class="token punctuation">;</span>  <span class="token property">--rootlex-maskbg</span><span class="token punctuation">:</span> <span class="token function">rgba</span><span class="token punctuation">(</span>255<span class="token punctuation">,</span> 255<span class="token punctuation">,</span> 255<span class="token punctuation">,</span> 0.6<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token property">--rootlex-maskbgdeep</span><span class="token punctuation">:</span> <span class="token function">rgba</span><span class="token punctuation">(</span>255<span class="token punctuation">,</span> 255<span class="token punctuation">,</span> 255<span class="token punctuation">,</span> 0.85<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token property">--rootlex-hovertext</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--rootlex-theme<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token property">--rootlex-ahoverbg</span><span class="token punctuation">:</span> #f7f7fa<span class="token punctuation">;</span>  <span class="token property">--rootlex-lighttext</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--rootlex-main<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token property">--rootlex-secondtext</span><span class="token punctuation">:</span> <span class="token function">rgba</span><span class="token punctuation">(</span>60<span class="token punctuation">,</span> 60<span class="token punctuation">,</span> 67<span class="token punctuation">,</span> 0.6<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token property">--rootlex-scrollbar</span><span class="token punctuation">:</span> <span class="token function">rgba</span><span class="token punctuation">(</span>60<span class="token punctuation">,</span> 60<span class="token punctuation">,</span> 67<span class="token punctuation">,</span> 0.4<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token property">--rootlex-card-btn-bg</span><span class="token punctuation">:</span> #edf0f7<span class="token punctuation">;</span>  <span class="token property">--rootlex-post-blockquote-bg</span><span class="token punctuation">:</span> #fafcff<span class="token punctuation">;</span>  <span class="token property">--rootlex-post-tabs-bg</span><span class="token punctuation">:</span> #f2f5f8<span class="token punctuation">;</span>  <span class="token property">--rootlex-secondbg</span><span class="token punctuation">:</span> #edf0f7<span class="token punctuation">;</span>  <span class="token property">--rootlex-shadow-nav</span><span class="token punctuation">:</span> 0 5px 12px -5px <span class="token function">rgba</span><span class="token punctuation">(</span>102<span class="token punctuation">,</span> 68<span class="token punctuation">,</span> 68<span class="token punctuation">,</span> 0.05<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token property">--rootlex-card-bg</span><span class="token punctuation">:</span> #fff<span class="token punctuation">;</span>  <span class="token property">--rootlex-shadow-lightblack</span><span class="token punctuation">:</span> 0 5px 12px -5px <span class="token function">rgba</span><span class="token punctuation">(</span>102<span class="token punctuation">,</span> 68<span class="token punctuation">,</span> 68<span class="token punctuation">,</span> 0<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token property">--rootlex-shadow-light2black</span><span class="token punctuation">:</span> 0 5px 12px -5px <span class="token function">rgba</span><span class="token punctuation">(</span>102<span class="token punctuation">,</span> 68<span class="token punctuation">,</span> 68<span class="token punctuation">,</span> 0<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token property">--rootlex-card-border</span><span class="token punctuation">:</span> #c0c6d8<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token selector">[data-theme='dark']</span> <span class="token punctuation">{</span>  <span class="token property">--rootlex-theme</span><span class="token punctuation">:</span> #0084ff<span class="token punctuation">;</span>  <span class="token property">--rootlex-theme-op</span><span class="token punctuation">:</span> #0084ff23<span class="token punctuation">;</span>  <span class="token property">--rootlex-blue</span><span class="token punctuation">:</span> #0084ff<span class="token punctuation">;</span>  <span class="token property">--rootlex-red</span><span class="token punctuation">:</span> #ff3842<span class="token punctuation">;</span>  <span class="token property">--rootlex-pink</span><span class="token punctuation">:</span> #ff7c7c<span class="token punctuation">;</span>  <span class="token property">--rootlex-green</span><span class="token punctuation">:</span> #57bd6a<span class="token punctuation">;</span>  <span class="token property">--rootlex-fontcolor</span><span class="token punctuation">:</span> #f7f7fa<span class="token punctuation">;</span>  <span class="token property">--rootlex-background</span><span class="token punctuation">:</span> #18171d<span class="token punctuation">;</span>  <span class="token property">--rootlex-reverse</span><span class="token punctuation">:</span> #fff<span class="token punctuation">;</span>  <span class="token property">--rootlex-maskbg</span><span class="token punctuation">:</span> <span class="token function">rgba</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0.6<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token property">--rootlex-maskbgdeep</span><span class="token punctuation">:</span> <span class="token function">rgba</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0.85<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token property">--rootlex-hovertext</span><span class="token punctuation">:</span> #0a84ff<span class="token punctuation">;</span>  <span class="token property">--rootlex-ahoverbg</span><span class="token punctuation">:</span> #fff<span class="token punctuation">;</span>  <span class="token property">--rootlex-lighttext</span><span class="token punctuation">:</span> #f2b94b<span class="token punctuation">;</span>  <span class="token property">--rootlex-secondtext</span><span class="token punctuation">:</span> #a1a2b8<span class="token punctuation">;</span>  <span class="token property">--rootlex-scrollbar</span><span class="token punctuation">:</span> <span class="token function">rgba</span><span class="token punctuation">(</span>200<span class="token punctuation">,</span> 200<span class="token punctuation">,</span> 223<span class="token punctuation">,</span> 0.4<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token property">--rootlex-card-btn-bg</span><span class="token punctuation">:</span> #30343f<span class="token punctuation">;</span>  <span class="token property">--rootlex-post-blockquote-bg</span><span class="token punctuation">:</span> #000<span class="token punctuation">;</span>  <span class="token property">--rootlex-post-tabs-bg</span><span class="token punctuation">:</span> #121212<span class="token punctuation">;</span>  <span class="token property">--rootlex-secondbg</span><span class="token punctuation">:</span> #30343f<span class="token punctuation">;</span>  <span class="token property">--rootlex-shadow-nav</span><span class="token punctuation">:</span> 0 5px 20px 0px <span class="token function">rgba</span><span class="token punctuation">(</span>28<span class="token punctuation">,</span> 28<span class="token punctuation">,</span> 28<span class="token punctuation">,</span> 0.4<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token property">--rootlex-card-bg</span><span class="token punctuation">:</span> #1d1b26<span class="token punctuation">;</span>  <span class="token property">--rootlex-shadow-lightblack</span><span class="token punctuation">:</span> 0 5px 12px -5px <span class="token function">rgba</span><span class="token punctuation">(</span>102<span class="token punctuation">,</span> 68<span class="token punctuation">,</span> 68<span class="token punctuation">,</span> 0<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token property">--rootlex-shadow-light2black</span><span class="token punctuation">:</span> 0 5px 12px -5px <span class="token function">rgba</span><span class="token punctuation">(</span>102<span class="token punctuation">,</span> 68<span class="token punctuation">,</span> 68<span class="token punctuation">,</span> 0<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token property">--rootlex-card-border</span><span class="token punctuation">:</span> #42444a<span class="token punctuation">;</span><span class="token punctuation">}</span></code><div class="code-expand-btn"><i class="ri-arrow-drop-down-line"></i></div></pre><p><strong>播放器样式</strong></p><pre class="language-css pre_code" data-language="css"><code class="language-css"><span class="token atrule"><span class="token rule">@media</span> screen <span class="token keyword">and</span> <span class="token punctuation">(</span><span class="token property">max-width</span><span class="token punctuation">:</span> 1300px<span class="token punctuation">)</span></span> <span class="token punctuation">{</span>    <span class="token selector">#nav-music</span> <span class="token punctuation">{</span>        <span class="token property">display</span><span class="token punctuation">:</span> none <span class="token important">!important</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token selector">#nav-music</span> <span class="token punctuation">{</span>    <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>    <span class="token property">align-items</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>    <span class="token property">z-index</span><span class="token punctuation">:</span> 1001<span class="token punctuation">;</span>    <span class="token property">position</span><span class="token punctuation">:</span> fixed<span class="token punctuation">;</span>    <span class="token property">bottom</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span>    <span class="token property">left</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span>    <span class="token property">cursor</span><span class="token punctuation">:</span> pointer<span class="token punctuation">;</span>    <span class="token property">transition</span><span class="token punctuation">:</span> 0.3s<span class="token punctuation">;</span>    <span class="token property">transform-origin</span><span class="token punctuation">:</span> left bottom<span class="token punctuation">;</span>    <span class="token property">box-shadow</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--rootlex-shadow-border<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token property">border-radius</span><span class="token punctuation">:</span> 40px<span class="token punctuation">;</span>    <span class="token property">overflow</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token selector">#nav-music:active</span> <span class="token punctuation">{</span>    <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">scale</span><span class="token punctuation">(</span>0.97<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token selector">#nav-music.playing</span> <span class="token punctuation">{</span>    <span class="token property">box-shadow</span><span class="token punctuation">:</span> 0 0 12px -3px <span class="token function">var</span><span class="token punctuation">(</span>--rootlex-none<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token property">-webkit-animation</span><span class="token punctuation">:</span> playingShadow 5s linear infinite<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token atrule"><span class="token rule">@-webkit-keyframes</span> playingShadow</span> <span class="token punctuation">{</span>    <span class="token selector">0%</span> <span class="token punctuation">{</span>        <span class="token property">box-shadow</span><span class="token punctuation">:</span> 0 0 12px -3px <span class="token function">var</span><span class="token punctuation">(</span>--rootlex-none<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token selector">50%</span> <span class="token punctuation">{</span>        <span class="token property">box-shadow</span><span class="token punctuation">:</span> 0 0 12px 0 <span class="token function">var</span><span class="token punctuation">(</span>--rootlex-main<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token selector">100%</span> <span class="token punctuation">{</span>        <span class="token property">box-shadow</span><span class="token punctuation">:</span> 0 0 12px -3px <span class="token function">var</span><span class="token punctuation">(</span>--rootlex-none<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token selector">#nav-music .aplayer.aplayer-withlrc .aplayer-pic</span> <span class="token punctuation">{</span>    <span class="token property">height</span><span class="token punctuation">:</span> 25px<span class="token punctuation">;</span>    <span class="token property">width</span><span class="token punctuation">:</span> 25px<span class="token punctuation">;</span>    <span class="token property">border-radius</span><span class="token punctuation">:</span> 40px<span class="token punctuation">;</span>    <span class="token property">z-index</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span>    <span class="token property">transition</span><span class="token punctuation">:</span> 0.3s<span class="token punctuation">;</span>    <span class="token property">-webkit-transform</span><span class="token punctuation">:</span> <span class="token function">rotate</span><span class="token punctuation">(</span>0deg<span class="token punctuation">)</span> <span class="token function">scale</span><span class="token punctuation">(</span>1<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token property">border</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--style-border-always<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token property">-webkit-animation</span><span class="token punctuation">:</span> changeright 24s linear infinite<span class="token punctuation">;</span>    <span class="token property">animation-play-state</span><span class="token punctuation">:</span> paused<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token selector">#nav-music.playing .aplayer.aplayer-withlrc .aplayer-pic</span> <span class="token punctuation">{</span>    <span class="token property">box-shadow</span><span class="token punctuation">:</span> 0 0 14px #ffffffa6<span class="token punctuation">;</span>    <span class="token property">-webkit-transform</span><span class="token punctuation">:</span> <span class="token function">rotate</span><span class="token punctuation">(</span>0deg<span class="token punctuation">)</span> <span class="token function">scale</span><span class="token punctuation">(</span>1.1<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token property">border-color</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--rootlex-white<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token property">animation-play-state</span><span class="token punctuation">:</span> running<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token atrule"><span class="token rule">@-webkit-keyframes</span> changeright</span> <span class="token punctuation">{</span>    <span class="token selector">0%</span> <span class="token punctuation">{</span>        <span class="token property">-webkit-transform</span><span class="token punctuation">:</span> <span class="token function">rotate</span><span class="token punctuation">(</span>0deg<span class="token punctuation">)</span> <span class="token function">scale</span><span class="token punctuation">(</span>1.1<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token property">box-shadow</span><span class="token punctuation">:</span> 0 0 2px #ffffff00<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token selector">25%</span> <span class="token punctuation">{</span>        <span class="token property">-webkit-transform</span><span class="token punctuation">:</span> <span class="token function">rotate</span><span class="token punctuation">(</span>90deg<span class="token punctuation">)</span> <span class="token function">scale</span><span class="token punctuation">(</span>1.1<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token property">box-shadow</span><span class="token punctuation">:</span> 0 0 14px #ffffff<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token selector">50%</span> <span class="token punctuation">{</span>        <span class="token property">-webkit-transform</span><span class="token punctuation">:</span> <span class="token function">rotate</span><span class="token punctuation">(</span>180deg<span class="token punctuation">)</span> <span class="token function">scale</span><span class="token punctuation">(</span>1.1<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token property">box-shadow</span><span class="token punctuation">:</span> 0 0 2px #ffffff00<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token selector">75%</span> <span class="token punctuation">{</span>        <span class="token property">-webkit-transform</span><span class="token punctuation">:</span> <span class="token function">rotate</span><span class="token punctuation">(</span>270deg<span class="token punctuation">)</span> <span class="token function">scale</span><span class="token punctuation">(</span>1.1<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token property">box-shadow</span><span class="token punctuation">:</span> 0 0 14px #ffffff<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token selector">100%</span> <span class="token punctuation">{</span>        <span class="token property">-webkit-transform</span><span class="token punctuation">:</span> <span class="token function">rotate</span><span class="token punctuation">(</span>360deg<span class="token punctuation">)</span> <span class="token function">scale</span><span class="token punctuation">(</span>1.1<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token property">box-shadow</span><span class="token punctuation">:</span> 0 0 2px #ffffff00<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token selector">#nav-music .aplayer.aplayer-withlrc .aplayer-info</span> <span class="token punctuation">{</span>    <span class="token property">height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>    <span class="token property">color</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--rootlex-fontcolor<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token property">margin-left</span><span class="token punctuation">:</span> 8px<span class="token punctuation">;</span>    <span class="token property">padding</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>    <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>    <span class="token property">align-items</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token selector">#nav-music.playing .aplayer.aplayer-withlrc .aplayer-info</span> <span class="token punctuation">{</span>    <span class="token property">color</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--rootlex-white<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token selector">#nav-music #nav-music-hoverTips</span> <span class="token punctuation">{</span>    <span class="token property">color</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--rootlex-white<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token property">background</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--rootlex-main<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>    <span class="token property">height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>    <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>    <span class="token property">top</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>    <span class="token property">left</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>    <span class="token property">align-items</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>    <span class="token property">justify-content</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>    <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>    <span class="token property">border-radius</span><span class="token punctuation">:</span> 40px<span class="token punctuation">;</span>    <span class="token property">opacity</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>    <span class="token property">font-size</span><span class="token punctuation">:</span> 12px<span class="token punctuation">;</span>    <span class="token property">z-index</span><span class="token punctuation">:</span> 2<span class="token punctuation">;</span>    <span class="token property">pointer-events</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>    <span class="token property">transition</span><span class="token punctuation">:</span> 0.3s<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token selector">#nav-music:hover:not(.playing) #nav-music-hoverTips</span> <span class="token punctuation">{</span>    <span class="token property">opacity</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token selector">#nav-music.playing #nav-music-hoverTips</span> <span class="token punctuation">{</span>    <span class="token property">opacity</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token selector">#nav-music .aplayer</span> <span class="token punctuation">{</span>    <span class="token property">background</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--card-bg<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token property">border-radius</span><span class="token punctuation">:</span> 60px<span class="token punctuation">;</span>    <span class="token property">height</span><span class="token punctuation">:</span> 41px<span class="token punctuation">;</span>    <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>    <span class="token property">margin</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>    <span class="token property">pointer-events</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>    <span class="token property">transition</span><span class="token punctuation">:</span> 0.3s<span class="token punctuation">;</span>    <span class="token property">border</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--style-border<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token property">box-shadow</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>    <span class="token property">width</span><span class="token punctuation">:</span> auto <span class="token important">!important</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token selector">#nav-music.playing .aplayer</span> <span class="token punctuation">{</span>    <span class="token property">background</span><span class="token punctuation">:</span> #0084ffdd<span class="token punctuation">;</span>    <span class="token property">border</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--style-border-hover<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token property">backdrop-filter</span><span class="token punctuation">:</span> <span class="token function">saturate</span><span class="token punctuation">(</span>180%<span class="token punctuation">)</span> <span class="token function">blur</span><span class="token punctuation">(</span>20px<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token property">-webkit-backdrop-filter</span><span class="token punctuation">:</span> <span class="token function">blur</span><span class="token punctuation">(</span>20px<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token selector">#nav-music .aplayer .aplayer-notice</span> <span class="token punctuation">{</span>    <span class="token property">display</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token selector">#nav-music .aplayer .aplayer-miniswitcher</span> <span class="token punctuation">{</span>    <span class="token property">display</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token selector">#nav-music .aplayer .aplayer-body</span> <span class="token punctuation">{</span>    <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>    <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>    <span class="token property">align-items</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>    <span class="token property">padding</span><span class="token punctuation">:</span> 0 12px 0 8px<span class="token punctuation">;</span>    <span class="token property">height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>    <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token selector">#nav-music .aplayer .aplayer-pic .aplayer-play</span> <span class="token punctuation">{</span>    <span class="token property">opacity</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token selector">#nav-music .aplayer-list</span> <span class="token punctuation">{</span>    <span class="token property">display</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token selector">#nav-music .aplayer .aplayer-info .aplayer-music</span> <span class="token punctuation">{</span>    <span class="token property">margin</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>    <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>    <span class="token property">align-items</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>    <span class="token property">padding</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>    <span class="token property">z-index</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token selector">#nav-music .aplayer .aplayer-info .aplayer-controller .aplayer-time</span> <span class="token punctuation">{</span>    <span class="token property">display</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token selector">#nav-music .aplayer .aplayer-info .aplayer-music .aplayer-author</span> <span class="token punctuation">{</span>    <span class="token property">display</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token selector">#nav-music .aplayer.aplayer-withlist .aplayer-info</span> <span class="token punctuation">{</span>    <span class="token property">border</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>    <span class="token property">display</span><span class="token punctuation">:</span> flex <span class="token important">!important</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token selector">#nav-music .aplayer .aplayer-pic div</span> <span class="token punctuation">{</span>    <span class="token property">border</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token selector">#nav-music .aplayer .aplayer-info .aplayer-music .aplayer-title</span> <span class="token punctuation">{</span>    <span class="token property">cursor</span><span class="token punctuation">:</span> pointer<span class="token punctuation">;</span>    <span class="token property">line-height</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span>    <span class="token property">display</span><span class="token punctuation">:</span> inline-block<span class="token punctuation">;</span>    <span class="token property">white-space</span><span class="token punctuation">:</span> nowrap<span class="token punctuation">;</span>    <span class="token property">max-width</span><span class="token punctuation">:</span> 120px<span class="token punctuation">;</span>    <span class="token property">overflow</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>    <span class="token property">text-overflow</span><span class="token punctuation">:</span> ellipsis<span class="token punctuation">;</span>    <span class="token property">transition</span><span class="token punctuation">:</span> 0.3s<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token selector">#nav-music .aplayer .aplayer-info .aplayer-controller</span> <span class="token punctuation">{</span>    <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>    <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>    <span class="token property">height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>    <span class="token property">top</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>    <span class="token property">left</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token selector">#nav-music .aplayer .aplayer-info .aplayer-controller .aplayer-bar-wrap</span> <span class="token punctuation">{</span>    <span class="token property">margin</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>    <span class="token property">padding</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token selector">#nav-music .aplayer .aplayer-info .aplayer-controller .aplayer-bar-wrap .aplayer-bar</span> <span class="token punctuation">{</span>    <span class="token property">height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>    <span class="token property">background</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token selector">#nav-music .aplayer .aplayer-info .aplayer-controller .aplayer-bar-wrap .aplayer-bar .aplayer-loaded</span> <span class="token punctuation">{</span>    <span class="token property">display</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token selector">#nav-music .aplayer .aplayer-info .aplayer-controller .aplayer-bar-wrap .aplayer-bar .aplayer-played</span> <span class="token punctuation">{</span>    <span class="token property">height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>    <span class="token property">opacity</span><span class="token punctuation">:</span> 0.1<span class="token punctuation">;</span>    <span class="token property">background-color</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--rootlex-white<span class="token punctuation">)</span> <span class="token important">!important</span><span class="token punctuation">;</span>    <span class="token property">-webkit-animation</span><span class="token punctuation">:</span> lightBar 5s ease infinite<span class="token punctuation">;</span>    <span class="token property">animation-play-state</span><span class="token punctuation">:</span> paused<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token selector">#nav-music.playing .aplayer .aplayer-info .aplayer-controller .aplayer-bar-wrap .aplayer-bar .aplayer-played</span> <span class="token punctuation">{</span>    <span class="token property">animation-play-state</span><span class="token punctuation">:</span> running<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token atrule"><span class="token rule">@-webkit-keyframes</span> lightBar</span> <span class="token punctuation">{</span>    <span class="token selector">0%</span> <span class="token punctuation">{</span>        <span class="token property">opacity</span><span class="token punctuation">:</span> 0.1<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token selector">60%</span> <span class="token punctuation">{</span>        <span class="token property">opacity</span><span class="token punctuation">:</span> 0.3<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token selector">100%</span> <span class="token punctuation">{</span>        <span class="token property">opacity</span><span class="token punctuation">:</span> 0.1<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token comment">/* 歌词 */</span><span class="token selector">#nav-music .aplayer.aplayer-withlrc .aplayer-lrc</span> <span class="token punctuation">{</span>    <span class="token property">width</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>    <span class="token property">opacity</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>    <span class="token property">transition</span><span class="token punctuation">:</span> 0.3s<span class="token punctuation">;</span>    <span class="token property">margin-left</span><span class="token punctuation">:</span> 8px<span class="token punctuation">;</span>    <span class="token property">margin-top</span><span class="token punctuation">:</span> -2px<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token selector">#nav-music.playing .aplayer.aplayer-withlrc .aplayer-lrc</span> <span class="token punctuation">{</span>    <span class="token property">width</span><span class="token punctuation">:</span> 200px<span class="token punctuation">;</span>    <span class="token property">margin-bottom</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>    <span class="token property">opacity</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token selector">#nav-music .aplayer .aplayer-lrc p.aplayer-lrc-current</span> <span class="token punctuation">{</span>    <span class="token property">color</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--rootlex-white<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token property">border</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token selector">#nav-music .aplayer .aplayer-lrc:after,#nav-music .aplayer .aplayer-lrc:before</span> <span class="token punctuation">{</span>    <span class="token property">display</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token selector">#nav-music .aplayer .aplayer-lrc p</span> <span class="token punctuation">{</span>    <span class="token property">color</span><span class="token punctuation">:</span> #ffffffb3<span class="token punctuation">;</span><span class="token punctuation">}</span></code><div class="code-expand-btn"><i class="ri-arrow-drop-down-line"></i></div></pre><h2 id="引入js"><a href="#引入js" class="headerlink" title="引入js"></a>引入js</h2><pre class="language-javascript pre_code" data-language="javascript"><code class="language-javascript"><span class="token comment">//音乐播放</span><span class="token keyword">var</span> rootlex <span class="token operator">=</span> <span class="token punctuation">{</span>    <span class="token function-variable function">musicToggle</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>rootlex_musicPlaying<span class="token punctuation">)</span> <span class="token punctuation">{</span>            document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">"#nav-music"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token string">"playing"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            rootlex_musicPlaying <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>            document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'meting-js'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>aplayer<span class="token punctuation">.</span><span class="token function">pause</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token punctuation">{</span>            document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">"#nav-music"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"playing"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            rootlex_musicPlaying <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>            document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'meting-js'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>aplayer<span class="token punctuation">.</span><span class="token function">play</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">}</span></code><div class="code-expand-btn"><i class="ri-arrow-drop-down-line"></i></div></pre></body></html>]]></content>
    
    
    <summary type="html">ai: 这篇文章介绍了如何在博客中添加音乐播放器。作者参考了另一个博客的设计，使用了一款名为 aplayer 的插件，并提供了参数解析和自定义CSS样式的方法。最终实现了一个漂亮的音乐播放器，可以在博客上通过自定义标签引用。</summary>
    
    
    
    <category term="教程" scheme="https://blog.nalex.top/categories/%E6%95%99%E7%A8%8B/"/>
    
    
    <category term="Heo" scheme="https://blog.nalex.top/tags/Heo/"/>
    
    <category term="音乐" scheme="https://blog.nalex.top/tags/%E9%9F%B3%E4%B9%90/"/>
    
  </entry>
  
  <entry>
    <title>如何部署unpkg至服务器</title>
    <link href="https://blog.nalex.top/posts/8f292cc0/"/>
    <id>https://blog.nalex.top/posts/8f292cc0/</id>
    <published>2022-01-22T22:53:00.000Z</published>
    <updated>2022-10-09T10:27:00.000Z</updated>
    
    <content type="html"><![CDATA[<html><head></head><body><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>unpkg 是一个前端常用的公共CDN，用来解包npm，但是有时会出现无法访问的状况。因为unpkg是一个开源项目，所以我们可以自己动手部署一个unpkg在自己的服务器上。</p><h2 id="准备"><a href="#准备" class="headerlink" title="准备"></a>准备</h2><ol><li>一台Linux服务器</li><li>ssh工具</li><li>一台能联网的电脑</li></ol><h2 id="正文索引"><a href="#正文索引" class="headerlink" title="正文索引"></a>正文索引</h2><ol><li>安装nodejs</li><li>从GitHub克隆Unpkg源码</li><li>运行Unpkg</li></ol><hr><h2 id="正文"><a href="#正文" class="headerlink" title="正文"></a>正文</h2><p>安装完宝塔面板后，得先检查是否开启防火墙的<code>8888</code>端口<br>腾讯云轻量为例，我们点开实例<br><img src="https://bu.dusays.com/2022/01/23/42c8b7d7d9c1a.png" alt="firewall.png"></p><p>点<code>防火墙</code> 然后点<code>添加规则</code><br><img src="https://bu.dusays.com/2022/01/23/42c8b7d7d9c1a.png" alt="creatfirewall.png"></p><p>在端口输入<code>8888</code> 然后点确定之后登录你的宝塔面板<br><img src="https://bu.dusays.com/2022/04/05/86e3861a94e56.png" alt="btnode.png"></p><p>依次点击<code>网站</code>，然后点击<code>node</code><br>初次安装需要安装node环境，按照给的提示做就行</p><p><img src="https://bu.dusays.com/2022/04/05/b9c26ba86b003.png" alt="nodev"></p><p>在选择版本这里选<code>16.13.2</code> （其他版本博主没有测试过，所以有可能会出现问题）</p><h3 id="从GitHub克隆代码"><a href="#从GitHub克隆代码" class="headerlink" title="从GitHub克隆代码"></a>从GitHub克隆代码</h3><p>点击<code>终端</code><br><img src="https://bu.dusays.com/2022/01/23/d60b4aea7fc17.png" alt="zhongdaunbt"><br>输入</p><pre class="language-none pre_code"><code class="language-none">git clone https://github.com/mjackson/unpkg.git</code><div class="code-expand-btn"><i class="ri-arrow-drop-down-line"></i></div></pre><p>完成克隆后输入命令</p><pre class="language-none pre_code"><code class="language-none">pwd</code><div class="code-expand-btn"><i class="ri-arrow-drop-down-line"></i></div></pre><p>注意这是centos的命令，其他系统可以上百度查询</p><p>记下输出的路径，这样子可以方便后面找这个文件<br><img src="https://bu.dusays.com/2022/01/23/7616e6932f703.png" alt="pwd"></p><h3 id="运行Unpkg"><a href="#运行Unpkg" class="headerlink" title="运行Unpkg"></a>运行Unpkg</h3><p>由于unpkg部署在cloudflare上所在unpkg源码中有关于cloudflare由于我们没有使用cloudflare，所以我们要删除相关组件<br>我们找到<code>modules/createServer.js</code><br>然后删除以下两行代码</p><pre class="language-diff pre_code" data-language="diff"><code class="language-diff"><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line"> import serveStats from './actions/serveStats.js';</span><span class="token prefix deleted">-</span><span class="token line"> app.get('/api/stats', serveStats);</span></span></code><div class="code-expand-btn"><i class="ri-arrow-drop-down-line"></i></div></pre><p>接下来我们得要重新构建node项目<br>首先我们得要下载构建依赖，在终端输入</p><pre class="language-none pre_code"><code class="language-none">npm i rollup</code><div class="code-expand-btn"><i class="ri-arrow-drop-down-line"></i></div></pre><p>然后我们编辑<code>package.json</code>  ，在<code>"postinstall": "yarn run build",</code>下面添加<code>"start": "set NODE_ENV=production&amp;&amp;node server.js"</code></p><pre class="language-DIFF pre_code" data-language="DIFF"><code class="language-DIFF">{  "name": "unpkg",  "private": true,  "description": "The CDN for everything on npm",  "scripts": {    "build": "rollup -c",    "clean": "git clean -e '!/.env' -fdX .",    "lint": "eslint .",    "serve": "nodemon -w server.js server.js",    "test": "jest",    "watch": "rollup -c -w",    "postinstall": "yarn run build",+   "start": "set NODE_ENV=production&amp;&amp;node server.js"  },  "depen</code><div class="code-expand-btn"><i class="ri-arrow-drop-down-line"></i></div></pre><p>然后在Unpkg文件位置打开终端输入</p><pre class="language-none pre_code"><code class="language-none">npm run build</code><div class="code-expand-btn"><i class="ri-arrow-drop-down-line"></i></div></pre><p><img src="https://bu.dusays.com/2022/01/23/f52abbe8145b5.png" alt="npm run build"><br>等待其生成<code> server.js</code><br>接下来我们回到<code> 网站</code>然后点击<code> node项目</code>，接下来点击<code> 添加node项目</code></p><ol><li>项目地址：unpkg的根目录</li><li>项目名称：随便输一个就行</li><li>启动选项：选择<code> strat ...</code></li><li>项目端口：填<code> 8080</code></li><li>运行用户：选<code> www</code>就行了</li><li>node版本： 你的node版本</li><li>绑定域名：你的域名 &amp; 如果没有就输入服务器ip</li></ol><p><img src="https://bu.dusays.com/2022/04/05/7ebe5ae13ef84.png" alt="npmsetting"><br>接下来点击<code>提交</code><br>然后我们点击<code>设置</code><br><img src="https://bu.dusays.com/2022/01/23/3b1de8166921d.png" alt="nodesetting"><br>然后点击<code> 外网映射</code>，开启<code> 外网映射</code><br>然后我们点击运行状态下面显示的<code>未启动</code>,将它启动<br><img src="https://bu.dusays.com/2022/01/23/1c81d84eb0aaa.png" alt="run"><br>接下来我们<strong>打开<code>8080</code>防火墙</strong>然后访问就可以啦<br>地址：你的域名<br><img src="https://bu.dusays.com/2022/04/05/14f9538a8ccbe.png" alt="unpkg"><br>如果你觉得速度不行可以自己套cdn</p><h2 id="博主的unpkg镜像"><a href="#博主的unpkg镜像" class="headerlink" title="博主的unpkg镜像"></a>博主的unpkg镜像</h2><p>已失效</p><h2 id="写在后面"><a href="#写在后面" class="headerlink" title="写在后面"></a>写在后面</h2><p>本文参考了一下前辈的文章</p><ol><li>删减cloufalre配置项 <a href="https://www.cnblogs.com/rongfengliang/p/14410193.html">https://www.cnblogs.com/rongfengliang/p/14410193.html</a></li><li>添加<code>package.json</code>启动代码 <a href="https://blog.csdn.net/weixin_39868248/article/details/111621946">https://blog.csdn.net/weixin_39868248/article/details/111621946</a></li></ol><p>非常感谢！！！！💕</p></body></html>]]></content>
    
    
    <summary type="html">ai: 这篇文章介绍了如何在Linux服务器上部署自己的unpkg，以解决使用公共CDN时出现无法访问问题。首先需要保证8888端口已开放，并安装nodejs。然后从GitHub克隆Unpkg源码，在此基础上运行Unpkg，去除与cloudflare相关组件并重新构建node项目。最后将Unpkg部署到网站上并启动，即可访问。文章提供了详细的步骤和示意图；并参考了前辈的经验。</summary>
    
    
    
    <category term="教程" scheme="https://blog.nalex.top/categories/%E6%95%99%E7%A8%8B/"/>
    
    
    <category term="Unpkg" scheme="https://blog.nalex.top/tags/Unpkg/"/>
    
    <category term="服务器" scheme="https://blog.nalex.top/tags/%E6%9C%8D%E5%8A%A1%E5%99%A8/"/>
    
  </entry>
  
  <entry>
    <title>Hexo</title>
    <link href="https://blog.nalex.top/posts/ec7d7221/"/>
    <id>https://blog.nalex.top/posts/ec7d7221/</id>
    <published>2021-12-19T05:52:46.000Z</published>
    <updated>2022-01-14T07:30:46.000Z</updated>
    
    <content type="html"><![CDATA[<html><head></head><body><h2 id="正文索引："><a href="#正文索引：" class="headerlink" title="正文索引："></a>正文索引：</h2><ol><li>下载git &amp; Node.js</li><li>安装hexo</li><li>安装Butterfly主题</li><li>将hexo部署至服务器</li><li>拓展</li></ol><h2 id="开始"><a href="#开始" class="headerlink" title="开始"></a>开始</h2><h3 id="安装git-amp-Node-js"><a href="#安装git-amp-Node-js" class="headerlink" title="安装git &amp; Node.js"></a>安装git &amp; Node.js</h3><h4 id="下载git"><a href="#下载git" class="headerlink" title="下载git"></a>下载git</h4><p><a href="https://git-scm.com/download/win">https://git-scm.com/download/win</a><br>然后安装一直无脑点_Next_就行了<br>安装完后记得查看版本号</p><pre class="language-none pre_code"><code class="language-none">git version</code><div class="code-expand-btn"><i class="ri-arrow-drop-down-line"></i></div></pre><p>对 linux 来说实在是太简单了，因为最早的 git 就是在 linux 上编写的，一行代码KO</p><pre class="language-none pre_code"><code class="language-none">sudo apt-get install git</code><div class="code-expand-btn"><i class="ri-arrow-drop-down-line"></i></div></pre><p>安装完后记得查看版本号</p><pre class="language-none pre_code"><code class="language-none">git version</code><div class="code-expand-btn"><i class="ri-arrow-drop-down-line"></i></div></pre><h4 id="下载Node-js"><a href="#下载Node-js" class="headerlink" title="下载Node.js"></a>下载Node.js</h4><p>Hexo 是基于 nodeJS 编写的，所以需要安装一下 nodeJs 和里面的 npm 工具。<br><a href="https://nodejs.org/en/'node%E5%AE%98%E7%BD%91">https://nodejs.org/en/'node官网</a><br>下载LTS版本即可<br>然后安装，安装完成后记得查看版本号，检查一下上是否安装成功</p><pre class="language-none pre_code"><code class="language-none">npm -vnode -v</code><div class="code-expand-btn"><i class="ri-arrow-drop-down-line"></i></div></pre><p>执行以下四行代码即可</p><pre class="language-none pre_code"><code class="language-none">sudo apt-get install nodejssudo apt-get install npm</code><div class="code-expand-btn"><i class="ri-arrow-drop-down-line"></i></div></pre><p>然后安装，安装完成后记得查看版本号，检查一下上是否安装成功</p><pre class="language-none pre_code"><code class="language-none">npm -vnode -v</code><div class="code-expand-btn"><i class="ri-arrow-drop-down-line"></i></div></pre><h3 id="安装hexo"><a href="#安装hexo" class="headerlink" title="安装hexo"></a>安装hexo</h3><h4 id="下载hexo"><a href="#下载hexo" class="headerlink" title="下载hexo"></a>下载hexo</h4><p>新建一个博客存放目录（想Blog、Myblog等都可以）。然后<code>cd</code>进入文件夹的根目录打开<code>cmd</code>。输入</p><pre class="language-none pre_code"><code class="language-none">npm install hexo-cli -g</code><div class="code-expand-btn"><i class="ri-arrow-drop-down-line"></i></div></pre><h4 id="初始化hexo"><a href="#初始化hexo" class="headerlink" title="初始化hexo"></a>初始化hexo</h4><p>下载完成后，在<code>cmd</code>输入</p><pre class="language-none pre_code"><code class="language-none">hexo ini 名称（随便起一个就行）</code><div class="code-expand-btn"><i class="ri-arrow-drop-down-line"></i></div></pre><p>有时候国内初始化速度非常慢，毕竟要从GitHub上拉取，这里说一下我找到的解决方法（亲测有效）</p><blockquote><p>⚠️这里参考了<a href="https://weilining.cf/5.html">https://weilining.cf/5.html</a> Ln的文章</p></blockquote><pre class="language-none pre_code"><code class="language-none">git clone --depth 1 https://gitee.com/weilining/hexo-starter.git blogcd bloggit submodule initgit submodule updatenpm config set registry http://registry.npm.taobao.orgnpm i</code><div class="code-expand-btn"><i class="ri-arrow-drop-down-line"></i></div></pre><p>安装完hexo后运行程序 访问一下</p><pre class="language-none pre_code"><code class="language-none">hexo cleanhexo ghexo s</code><div class="code-expand-btn"><i class="ri-arrow-drop-down-line"></i></div></pre><p><img src="https://cdn.jsdelivr.net/gh/rootlexblog/cdn-image@master/1639902418000.png" alt="hexos.png"><br>当出现这就说明你成功了，接下来访问<a href="http://localhost:4000/">http://localhost:4000</a>即可</p><p>Tips: hexo clean、hexo g、hexo s的用法</p><p>;;;id1 hexo clean<br><code>hexo clean</code> 可简写为 <code>hexo cl</code><br>清除缓存文件 (db.json) 和已生成的静态文件 (public)。<br>在某些情况（尤其是更换主题后），如果发现您对站点的更改无论如何也不生效，您可能需要运行该命令。<br>;;;<br>;;;id1 hexo generate<br><code>hexo g</code> 可写为 <code>hexo generate</code> (哪个简单就不用我多说了吧)<br>生成静态文件<br>;;;<br>;;;id1 hexo server<br><code>hexo s</code> 可写为 <code>hexo server</code><br>启动服务器。 默认情况下，访问网址为： <a href="http://localhost:4000/">http://localhost:4000/</a><br>;;;</p><h3 id="安装Butterfly"><a href="#安装Butterfly" class="headerlink" title="安装Butterfly"></a>安装Butterfly</h3><p>本站所使用的就是Butterfly主题。Butterfly作者<a href="https://butterfly.js.org/">BLOG</a></p><h4 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h4><p>在你的 Hexo 根目录里打开命令行输入，等待它从GitHub克隆完成</p><pre class="language-none pre_code"><code class="language-none">git clone -b master https://github.com/jerryc127/hexo-theme-butterfly.git themes/butterfly</code><div class="code-expand-btn"><i class="ri-arrow-drop-down-line"></i></div></pre><h4 id="应用主题"><a href="#应用主题" class="headerlink" title="应用主题"></a>应用主题</h4><p><img src="https://unpkg.zhimg.com/nalex-img@1.0.3/post/wnsgr2bLOC.png" alt="hexogenmulu"><br>接下来，找到hexo主题根目录找到并打开<code>_config.yml</code><br>然后在文件找找到下面在这个，将<code>theme：</code>后面的修改为<code>butterfly</code></p><pre class="language-none pre_code"><code class="language-none">theme: butterfly</code><div class="code-expand-btn"><i class="ri-arrow-drop-down-line"></i></div></pre><h4 id="安装插件渲染器"><a href="#安装插件渲染器" class="headerlink" title="安装插件渲染器"></a>安装插件渲染器</h4><p>由于butterfly主题是基于<code>hexo-renderer-pug hexo-renderer-stylus</code>开发的，所以我们就得安装这个插件（渲染器），让网站能正常启动</p><pre class="language-none pre_code"><code class="language-none">npm install hexo-renderer-pug hexo-renderer-stylus --save</code><div class="code-expand-btn"><i class="ri-arrow-drop-down-line"></i></div></pre><p>好了接下来你就可以执行</p><pre class="language-none pre_code"><code class="language-none">hexo clean hexo ghexo s</code><div class="code-expand-btn"><i class="ri-arrow-drop-down-line"></i></div></pre><p>接下来就是部署至GitHub或Gitee</p><h3 id="将hexo部署至服务器"><a href="#将hexo部署至服务器" class="headerlink" title="将hexo部署至服务器"></a>将hexo部署至服务器</h3><ol><li>使用GitHub page❤️</li><li>使用Gitee</li></ol><p>虽然有时候GitHub很不稳定，容易抽风，👍但是————不用实名</p><h4 id="准备"><a href="#准备" class="headerlink" title="准备"></a>准备</h4><ol><li>Github账户</li><li>Git</li></ol><h4 id="创建仓库"><a href="#创建仓库" class="headerlink" title="创建仓库"></a>创建仓库</h4><p><img src="https://unpkg.zhimg.com/nalex-img@1.0.2/post/mqv83RouyF.png" alt="新建仓库"></p><p>蓝色圈出来的，需要填写<code>GitHub用户名+github.io</code></p><h4 id="使用git完成部署"><a href="#使用git完成部署" class="headerlink" title="使用git完成部署"></a>使用git完成部署</h4><p>打开<code>git bash</code> 或 <code>cmd</code> 输入</p><pre class="language-none pre_code"><code class="language-none">git config --global user.email "你的GitHub邮箱"git config --global user.name "你的GitHub名字"</code><div class="code-expand-btn"><i class="ri-arrow-drop-down-line"></i></div></pre><p>接下来这个来生成密钥</p><pre class="language-none pre_code"><code class="language-none">ssh-keygen -t rsa -C "youremail"</code><div class="code-expand-btn"><i class="ri-arrow-drop-down-line"></i></div></pre><p>然后一直按回车<br>然后找到.ssh 文件夹进入</p><p><img src="https://unpkg.zhimg.com/nalex-img@1.0.3/post/iAWYDWwXGP.png" alt="pub"></p><h2 id="复制文件id-rsa-pub里面的内容"><a href="#复制文件id-rsa-pub里面的内容" class="headerlink" title="复制文件id_rsa.pub里面的内容"></a>复制文件<code>id_rsa.pub</code>里面的内容</h2><p>然后返回GitHub，登录账号找到setting</p><p><img src="https://unpkg.zhimg.com/nalex-img@1.0.3/post/pCWN48RTJB.png" alt="githubkey"></p><p>点击<code>SSH and GPG keys</code>,再点击<code>New ssh key</code></p><p><img src="https://unpkg.zhimg.com/nalex-img@1.0.3/post/IUhgu3emGH.png" alt="githubkrynew"></p><p><code>title</code> 随便输个名字，知道啥意思就好。在 <code>key</code> 中 <strong>输入刚刚复制的公钥</strong>。然后点击 <code>Add ssh kry</code> 即可<br><strong>接下来配置一下hexo部署文件</strong><br>进入博客根目录找到 <code>_config.yml</code> 打开。<br>找到下面这段代码</p><pre class="language-none pre_code"><code class="language-none"># Deployment## Docs: https://hexo.io/docs/one-command-deploymentdeploy:  type: git  repo:   branch: master</code><div class="code-expand-btn"><i class="ri-arrow-drop-down-line"></i></div></pre><p>然后将其修改为</p><pre class="language-none pre_code"><code class="language-none"># Deployment## Docs: https://hexo.io/docs/one-command-deploymentdeploy:  type: git  repo: 你的git地址  branch: master</code><div class="code-expand-btn"><i class="ri-arrow-drop-down-line"></i></div></pre><p>git地址在你的博客仓库Download的子菜单中</p><p>然后在hexo博客的根目录打开 <code>cmd</code><br>执行以下指令</p><pre class="language-none pre_code"><code class="language-none">hexo clhexo ghexo d</code><div class="code-expand-btn"><i class="ri-arrow-drop-down-line"></i></div></pre><p><img src="https://unpkg.zhimg.com/nalex-img@1.0.3/post/22TXadh52f.png" alt="hexod"></p><p>👌看到这个就说明成功了，过一会访问<code>GitHub用户名.github.io</code>就可以看到博客了</p><h2 id="拓展"><a href="#拓展" class="headerlink" title="拓展"></a>拓展</h2><h3 id="将博客部署至Vercel"><a href="#将博客部署至Vercel" class="headerlink" title="将博客部署至Vercel"></a>将博客部署至Vercel</h3><ol><li>准备Vercel账号 <a href="https://vercel.com/">https://vercel.com/</a></li><li>准备一个域名（⚠️非必要）</li></ol><h4 id="Part-A"><a href="#Part-A" class="headerlink" title="Part A"></a>Part A</h4><p>首先我们进入vercel官网，支持GitHub登陆非常方便</p><p><img src="https://bu.dusays.com/2022/05/03/62707a4c3daf9.png" alt="vercel1"></p><p>点击<code>new project</code></p><p><img src="https://bu.dusays.com/2022/05/03/62707a4da36c0.png" alt="vercel2"></p><p>找到自己的GitHub page项目，点击<code>import</code></p><p><img src="https://bu.dusays.com/2022/05/03/62707a51414e7.png" alt="vercel3"></p><p>可以选择改一下名字，其他默认即可，点击<code>deploy</code></p><h4 id="Part-B"><a href="#Part-B" class="headerlink" title="Part B"></a>Part B</h4><p>首先我们需要准备一个域名，你可以在各大IDC服务商的官网注册如（腾讯，阿里，华为等）<br>:::info<br>国内注册域名需要实名<br>:::</p><p><img src="https://bu.dusays.com/2022/05/03/62707a4c9111b.png" alt="vercel4"><br>点击刚部署完成的项目</p><p><img src="https://bu.dusays.com/2022/05/03/62707a4fb2d31.png" alt="vercel5"><br>在输入框中输入你注册的域名，点击<code>add</code><br>vercel会验证你的域名是否已解析到vercel，如果没有需要手动添加dns<br><img src="https://bu.dusays.com/2022/05/03/62707a4fcdce9.png" alt="vercel6"><br><img src="https://bu.dusays.com/2022/05/03/62707a4e9b84e.png" alt="vercel7"></p><p>按照提示完成dns解析,OK接下来你就能通过域名访问你的博客了！</p><hr><p>END</p></body></html>]]></content>
    
    
    <summary type="html">ai: 这篇文章介绍了如何使用Hexo和Butterfly主题快速搭建个人博客，并将其部署到GitHub或Gitee上。首先需要安装Git和Node.js，然后在命令行中初始化并安装Hexo和Butterfly主题。最后，根据教程将Hexo博客部署到服务器上，包括使用GitHub Page和Vercel。注意事项和操作步骤都有详细说明。</summary>
    
    
    
    <category term="教程" scheme="https://blog.nalex.top/categories/%E6%95%99%E7%A8%8B/"/>
    
    
    <category term="Hexo" scheme="https://blog.nalex.top/tags/Hexo/"/>
    
    <category term="butterfly" scheme="https://blog.nalex.top/tags/butterfly/"/>
    
  </entry>
  
  <entry>
    <title>互联网</title>
    <link href="https://blog.nalex.top/posts/80cfaa0f/"/>
    <id>https://blog.nalex.top/posts/80cfaa0f/</id>
    <published>2020-05-02T23:45:15.000Z</published>
    <updated>2021-02-09T06:09:24.000Z</updated>
    
    <content type="html"><![CDATA[<html><head></head><body><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>随着互联网发展的日新月异，我们越来越离不开互联网。我们作为互联网的一个使用者，您是否了解过其工作原理呢？</p><h2 id="索引列表"><a href="#索引列表" class="headerlink" title="索引列表"></a>索引列表</h2><ol><li>互联网（Internet）</li><li>协议</li><li>IP协议</li><li>DNS</li><li>tcp/udp协议</li><li>http/https协议</li></ol><h2 id="互联网Internet"><a href="#互联网Internet" class="headerlink" title="互联网Internet"></a>互联网Internet</h2><blockquote><p>互联网（internet），又称国际网络，指的是网络与网络之间所串连成的庞大网络，这些网络以一组通用的协议相连，形成逻辑上的单一巨大国际网络。<br>互联网始于1969年美国的阿帕网。通常internet泛指互联网，而Internet则特指因特网。这种将计算机网络互相联接在一起的方法可称作“网络互联”，在这基础上发展出覆盖全世界的全球性互联网络称互联网，即是互相连接一起的网络结构。互联网并不等同万维网，万维网只是一建基于超文本相互链接而成的全球性系统，且是互联网所能提供的服务其中之一。</p></blockquote><p>这是来自[百度百科][1]的说法，<strong>通俗点就是把每个能联网的设备连接起来</strong></p><h2 id="协议"><a href="#协议" class="headerlink" title="协议"></a>协议</h2><p>什么是<code>协议</code>？</p><p>我们打个比方，如果你要书信给某人是不是要用到<em>书信格式</em> ，而这个<em>书信格式</em>就相当于<code>协议</code> ，当用户请求网页时，客户端就会按照<code>协议</code>去发送请求。所以这个<code>协议</code>就是规范互联网中的请求，使请求有统一的格式。</p><h2 id="IP协议"><a href="#IP协议" class="headerlink" title="IP协议"></a>IP协议</h2><blockquote><p>IP是Internet Protocol（网际互连协议）的缩写，是TCP/IP体系中的网络层协议。设计IP的目的是提高网络的可扩展性：一是解决互联网问题，实现大规模、异构网络的互联互通；二是分割顶层网络应用和底层网络技术之间的耦合关系，以利于两者的独立发展。根据端到端的设计原则，IP只为主机提供一种无连接、不可靠的、尽力而为的数据包传输服务。</p></blockquote><p>![结构图][2]<br>上图是互联网中的基本结构图，我们很容易就可以发现<em>IP协议</em>是属于网络层的，打个比方<em>IP</em>就像我们生活中的<strong>地址</strong>，用来告诉别人我们住哪，<em>IP</em> 也是，它告诉下面的 <strong>链路层</strong> 这个数据包要发往哪里，就像我们寄快递时要填写地址是一个道理。</p><h2 id="DNS"><a href="#DNS" class="headerlink" title="DNS"></a>DNS</h2><p>DNS —— 域名服务器<br>什么是<code>域名</code>？</p><blockquote><p>域名（英语：Domain Name），又称网域，是由一串用点分隔的名字组成的Internet上某一台计算机或计算机组的名称，用于在数据传输时对计算机的定位标识（有时也指地理位置）。 [1]<br>由于IP地址具有不方便记忆并且不能显示地址组织的名称和性质等缺点，人们设计出了域名，并通过网域名称系统（DNS，Domain Name System）来将域名和IP地址相互映射，使人更方便地访问互联网，而不用去记住能够被机器直接读取的IP地址数串。</p></blockquote><p>比如我们现在要访问一个网站，我们就得记下这个网站的IP地址，xxx.xxx.xxx (IPv4), 而IP地址是由9位数构成，这是不是很难记，且不能显示地址组织的名称和性质。所以人们就设计出了域名。</p><p>当我们输入域名时如<code>https://blog.nalex.top</code>, 客户端就会向Dns发送请求，Dns服务器在收到请求后会查找这个域名所对应的IP地址,该DNS客户机最终会收到一份回答报文，其中包含有该主机名对应的IP地址一旦该浏览器收到来自DNS的IP地址，就可以向该IP地址定位的HTTP服务器发起TCP连接</p></body></html>]]></content>
    
    
    <summary type="html">ai: 这篇文章介绍了互联网的工作原理。首先，介绍了互联网是由相互连接的网络组成的庞大网络，以及互联网和万维网的区别。然后，解释了协议在互联网中的作用，并详细介绍了IP协议，在互联网中的位置和功能。接下来，讲解了DNS系统的作用，它可以将域名和IP地址相互映射，使人们更方便地访问互联网。最后，提到客户端会按照协议发送请求，向DNS服务器发起请求查找对应的IP地址，并向该IP地址定位的HTTP服务器发起TCP连接。</summary>
    
    
    
    <category term="笔记" scheme="https://blog.nalex.top/categories/%E7%AC%94%E8%AE%B0/"/>
    
    
    <category term="互联网" scheme="https://blog.nalex.top/tags/%E4%BA%92%E8%81%94%E7%BD%91/"/>
    
  </entry>
  
</feed>
